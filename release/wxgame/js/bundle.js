"use strict"; var __extends = function () { var e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var a in t) t.hasOwnProperty(a) && (e[a] = t[a]) }; return function (t, a) { function i() { this.constructor = t } e(t, a), t.prototype = null === a ? Object.create(a) : (i.prototype = a.prototype, new i) } }(); !function () { function e(t, a, i) { function n(r, s) { if (!a[r]) { if (!t[r]) { var h = "function" == typeof require && require; if (!s && h) return h(r, !0); if (o) return o(r, !0); var d = new Error("Cannot find module '" + r + "'"); throw d.code = "MODULE_NOT_FOUND", d } var l = a[r] = { exports: {} }; t[r][0].call(l.exports, function (e) { return n(t[r][1][e] || e) }, l, l.exports, e, t, a, i) } return a[r].exports } for (var o = "function" == typeof require && require, r = 0; r < i.length; r++)n(i[r]); return n } return e }()({
  1: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = e("./gametip/Home"), n = e("./loading/Load"), o = e("./main/Mains"), r = function () { function e() { } return e.init = function () { var e = Laya.ClassUtils.regClass; e("gametip/Home.ts", i.default), e("loading/Load.ts", n.default), e("main/Mains.ts", o.default) }, e.width = 750, e.height = 1334, e.scaleMode = "fixedwidth", e.screenMode = "none", e.alignV = "top", e.alignH = "left", e.startScene = "GameScene/LoadScene.scene", e.sceneRoot = "", e.debug = !1, e.stat = !1, e.physicsDebug = !1, e.exportSceneToJson = !0, e }(); a.default = r, r.init() }, { "./gametip/Home": 11, "./loading/Load": 12, "./main/Mains": 14 }], 2: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = e("./GameConfig"), n = e("./common/newVersion"), o = e("./config/config"); new (function () { function e() { Laya.Browser.onMiniGame && new n.default, window.Laya3D ? Laya3D.init(i.default.width, i.default.height) : Laya.init(i.default.width, i.default.height, Laya.WebGL), Laya.Physics && Laya.Physics.enable(), Laya.DebugPanel && Laya.DebugPanel.enable(), Laya.stage.scaleMode = i.default.scaleMode, Laya.stage.screenMode = i.default.screenMode, Laya.URL.exportSceneToJson = i.default.exportSceneToJson; var e = Laya.Browser.window.innerWidth, t = Laya.Browser.window.innerHeight; Laya.Browser.window.scX = e / 375, Laya.Browser.window.scY = t / 667, Laya.stage.width = 375 * Laya.Browser.window.scX * 2, Laya.stage.height = 667 * Laya.Browser.window.scY * 2, Laya.stage.bgColor = "#ffffff", Laya.stage.size(Laya.stage.width, Laya.stage.height), (i.default.debug || "true" == Laya.Utils.getQueryString("debug")) && Laya.enableDebugPanel(), i.default.physicsDebug && Laya.PhysicsDebugDraw && Laya.PhysicsDebugDraw.enable(), i.default.stat && Laya.Stat.show(), Laya.alertGlobalError = !0, Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION) } return e.prototype.onVersionLoaded = function () { var e = this; Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, null)); var t = [{ url: "MyScene/Load.json", type: Laya.Loader.JSON }, { url: "fenbao/res/atlas/jiazai.atlas", type: Laya.Loader.ATLAS }, { url: "jiazai/startBg.jpg", type: Laya.Loader.IMAGE }, { url: "jiazai/loadActive.png", type: Laya.Loader.IMAGE }, { url: "jiazai/loadActive1.png", type: Laya.Loader.IMAGE }, { url: "jiazai/loadDefault.png", type: Laya.Loader.IMAGE }, { url: "jiazai/logo.png", type: Laya.Loader.IMAGE }]; Laya.loader.load(t, null, Laya.Handler.create(this, function (t) { e.onProgress(t) }, null, !1)) }, e.prototype.onProgress = function (e) { 100 == 100 * e && this.onConfigLoaded() }, e.prototype.onConfigLoaded = function () { var e = new Laya.BitmapFont; e.loadFont("ziti/loadFont.fnt", new Laya.Handler(this, function () { e.setSpaceWidth(10), e.letterSpacing = 2, e.autoScaleSize = !0, Laya.Text.registerBitmapFont("loadFont", e), Laya.Browser.onMiniGame && (Laya.Browser.window.wx.onShow(function (e) { Laya.timer.scale = 1, null != e.query.upUserInfoId ? o.default.upUserInfoId = e.query.upUserInfoId : o.default.upUserInfoId = 0 }), Laya.Browser.window.wx.onHide(function () { Laya.timer.scale = 0 })); var t = new Laya.Scene; t.loadScene("MyScene/Load.scene"), Laya.stage.addChild(t) }, [e])) }, e }()) }, { "./GameConfig": 1, "./common/newVersion": 8, "./config/config": 9 }], 3: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = function (e) { function t(t) { var a = e.call(this) || this; return a.allPopop(t), a } return __extends(t, e), t.prototype.allPopop = function (e) { var a = this, i = new Laya.Sprite; i.width = 212 * Laya.Browser.window.scX; var n = new Laya.Text; n.text = e, n.color = "#fff", n.fontSize = 28 * Laya.Browser.window.scX, n.width = i.width - 20 * Laya.Browser.window.scX, n.align = "center", n.wordWrap = !0, i.height = n.height + 50 * Laya.Browser.window.scX, i.graphics.drawTexture(Laya.loader.getRes("tupian/opacity.png"), 0, 0, i.width, i.height), n.x = (i.width - n.width) / 2, n.y = (i.height - n.height) / 2, i.addChild(n), i.alpha = 0, i.scaleX = 0, i.scaleY = 0, i.pivot(i.width / 2, i.height / 2), i.x = Laya.stage.width / 2, i.y = Laya.stage.height / 2; var o = new Laya.TimeLine; o.to(i, { alpha: 1, scaleX: 1, scaleY: 1 }, 500, Laya.Ease.elasticInOut, 0), o.to(i, { alpha: 1, scaleX: 1, scaleY: 1 }, 1e3, Laya.Ease.elasticInOut, 0), o.to(i, { y: -Laya.stage.height }, 500, Laya.Ease.linearOut, 0), o.on(Laya.Event.COMPLETE, this, function () { Laya.Pool.recover("popupAll", t), a.removeSelf() }), o.play(0, !1), this.addChild(i), this.zOrder = 10, Laya.stage.addChild(this) }, t }(Laya.Sprite); a.default = i }, {}], 4: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = function () { function e(e, t, a) { void 0 === a && (a = !1), this.loop = !1, this.role = e, this.callback = t, this.loop = a } return e.prototype.jelly = function () { var e = this, t = new Laya.TimeLine; t.to(this.role, { scaleX: 1.2, scaleY: 1.2 }, 150, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1, scaleY: 1.1 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1, scaleY: 1 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1.1, scaleY: 1 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1, scaleY: 1 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1, scaleY: 1.05 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1, scaleY: 1 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1.05, scaleY: 1 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1, scaleY: 1 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1, scaleY: 1.01 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1, scaleY: 1 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1.01, scaleY: 1 }, 25, Laya.Ease.elasticInOut, 0), t.to(this.role, { scaleX: 1, scaleY: 1 }, 25, Laya.Ease.elasticInOut, 0), this.loop ? (t.to(this.role, { scaleX: 1, scaleY: 1 }, 3e3, Laya.Ease.elasticInOut, 0), t.play(0, !0)) : (t.on(Laya.Event.COMPLETE, this, function () { e.callback() }), t.play(0, !1)) }, e.prototype.zoom = function () { var e = new Laya.TimeLine; e.to(this.role, { scaleX: 1.1, scaleY: 1.1 }, 1e3, Laya.Ease.linearInOut, 0), e.to(this.role, { scaleX: 1, scaleY: 1 }, 1e3, Laya.Ease.linearInOut, 0), e.play(0, this.loop) }, e }(); a.default = i }, {}], 5: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = function () { function e(e) { this.str = 0, this.str = e } return e.prototype.formatPoint = function () { var e = this.str.toString().length; if (e <= 3) return this.str; var t = e % 3; return t > 0 ? this.str.toString().slice(0, t) + "," + this.str.toString().slice(t, e).match(/\d{3}/g).join(",") : this.str.toString().slice(t, e).match(/\d{3}/g).join(",") }, e.prototype.formatPointNumber = function () { if (this.str > 99999 && this.str <= 99999999) { this.str = Math.floor(this.str / 1e3); var e = this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }); return e + "K" } if (this.str > 99999999 && this.str <= 99999999999) { this.str = Math.floor(this.str / 1e6); var e = this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }); return e + "M" } if (this.str > 99999999999 && this.str <= 99999999999999) { this.str = Math.floor(this.str / 1e9); var e = this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }); return e + "B" } if (this.str > 99999999999999) { this.str = Math.floor(this.str / 1e12); var e = this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }); return e + "T" } return this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }) }, e.prototype.formatThreeNumber = function () { if (this.str > 999 && this.str <= 999999) { this.str = Math.floor(this.str / 1e3); var e = this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }); return e + "K" } if (this.str > 999999 && this.str <= 999999999) { this.str = Math.floor(this.str / 1e6); var e = this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }); return e + "M" } if (this.str > 999999999 && this.str <= 999999999999) { this.str = Math.floor(this.str / 1e9); var e = this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }); return e + "B" } if (this.str > 999999999999) { this.str = Math.floor(this.str / 1e12); var e = this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }); return e + "T" } return this.str.toString().split("").reverse().reduce(function (e, t, a) { return (a % 3 ? t : t + ",") + e }) }, e }(); a.default = i }, {}], 6: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = function () { function e(e, t, a) { this.url = e, this.isBgMusic = t, this.soundNum = a, this._playSound() } return e.prototype._playSound = function () { var e = this; if (this.isBgMusic) { if (Laya.SoundManager.playMusic(this.url, 0), Laya.Browser.onMiniGame) { var t = Laya.Browser.window.wx; t.bgMusicUrl = this.url, t.onHide(function () { Laya.SoundManager.destroySound(t.bgMusicUrl) }), t.onShow(function () { Laya.SoundManager.playMusic(t.bgMusicUrl, 0) }) } } else Laya.SoundManager.playSound(this.url, 1, Laya.Handler.create(this, function () { Laya.SoundManager.destroySound(e.url) })); Laya.SoundManager.setMusicVolume(this.soundNum) }, e }(); a.default = i }, {}], 7: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = function () { function e(e) { this.data = e } return e.prototype.getCookie = function () { return void 0 != JSON.stringify(this.data.header).split("JSESSIONID")[1] ? JSON.stringify(this.data.header).split("JSESSIONID")[1].split(";")[0].split("=")[1] : null }, e }(); a.default = i }, {}], 8: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = function () { function e() { if (Laya.Browser.onMiniGame) { var e = Laya.Browser.window.wx, t = e.getUpdateManager(); t.onCheckForUpdate(function (e) { console.log(e.hasUpdate) }), t.onUpdateReady(function () { e.showModal({ title: "更新提示", content: "新版本已经准备好，是否重启应用？", success: function (e) { e.confirm && t.applyUpdate() } }) }), t.onUpdateFailed(function () { e.showToast({ title: "版本下载失败！", icon: "", image: "jiazai/fails.png" }) }) } } return e }(); a.default = i }, {}], 9: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = { sex: 1, openId: "", bannerAd: null, userInv: 0, userPage: 1, fromChannel: "keen", upUserInfoId: 0, cookie: "", userMaxScore: 1, lookNum: 0, shareText: ["这吃鸡，也太简单了吧！"], getGift: !1, audio: !1, sound: !1, openSuccess: !0, invArray: [30, 30, 30, 50, 50, 50, 80, 80, 80, 100, 100, 100, 200, 200, 200], bossHpArr: [1e3, 1500, 1500, 2e3, 2e3], userHp: 1e3, userNowHp: 1e3, userUpArr: [], useUpLevel: !1, getDayGift: !1, nowLevel: 0, passLevel: 0, passOk: !1, showTxt: !1, prop: { cz: 1, pen: 1, resetImg: 1, bomb: 1 }, zsNum: 0, confirmBS: 0, levelGetNum: 1, loginData: {}, authorize: !1, nickName: "无名", userImg: "jiazai/d.png", shareNum: 0, shareSuccess: !1, saveLevelInfo: null, gameOver: !1, wqPZ: [], gone: [{ name: "sgone", zdNum: 2, level: 1, upMoney: 100, sh: 20 }, { name: "cgone", zdNum: 4, level: 1, upMoney: 100, sh: 40 }, { name: "dgone", zdNum: 10, level: 1, upMoney: 100, sh: 100 }, { name: "bgone", zdNum: 6, level: 1, upMoney: 100, sh: 60 }, { name: "jgone", zdNum: 8, level: 1, upMoney: 100, sh: 80 }], testHp: 1e4, btPlay: !1 }; a.default = i }, {}], 10: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = function (e) { function t() { var t = e.call(this) || this; return t.size(103 * Laya.Browser.window.scX, 103 * Laya.Browser.window.scX), t } return __extends(t, e), t }(Laya.Box); a.default = i }, {}], 11: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = e("./GameItem"), n = e("../popup/PopupManager"), o = e("../common/BtnAnimation"), r = e("../config/config"), s = e("../request/GetData"), h = e("../common/SoundManager"), d = e("../common/FormatNumber"), l = e("../common/AllTip"), u = function (e) { function t() { var t = e.call(this) || this; return t.clickOk = !0, t.openRank = !0, t.openInv = !0, t.openS = !0, t } return __extends(t, e), t.prototype.onEnable = function () { this.scene = this.owner, this.scene.width = Laya.stage.width, this.scene.height = Laya.stage.height; var e = (Laya.Browser.window.scX, this.scene.getChildByName("tipBg")); e.width = this.scene.width, e.height = this.scene.height, r.default.useUpLevel = !1, this.initTips() }, t.prototype.initTips = function () { var e = this, t = Laya.Browser.window.scX, a = Laya.Browser.window.scY, i = this.getImage("kaishiyouxi/zsbg.png", 211 * t, 60 * t, 40 * t, 55 * t); this.jewelNum = new Laya.Text, this.jewelNum.fontSize = 32 * t, this.jewelNum.text = "" + new d.default(r.default.zsNum).formatPointNumber(), this.jewelNum.align = "center", this.jewelNum.color = "#fff", this.jewelNum.width = i.width - 48 * t, this.jewelNum.pos(48 * t, (i.height - this.jewelNum.height) / 2), i.addChild(this.jewelNum), this.scene.addChild(i); var h = this.scene.getChildByName("logo"), u = h.getBounds(); h.width = u.width * t, h.height = u.height * t, h.pos((Laya.stage.width - h.width) / 2, u.y * a); var g = new Laya.TimeLine, f = h.y; g.to(h, { y: f - 50 * t }, 3e3, Laya.Ease.linearInOut, 0), g.to(h, { y: f }, 3e3, Laya.Ease.linearInOut, 0), g.play(0, !0); var c = new Laya.Sprite; c.width = 363 * t; var p = this.getImage("kaishiyouxi/videoBtn.png", 358 * t, 195 * t, (c.width - 358 * t) / 2, 0); p.pivot(p.width / 2, p.height / 2), p.pos(c.width / 2, p.height / 2), p.zOrder = 2, c.addChild(p); var y = this.getImage("kaishiyouxi/comBtn.png", 184 * t, 74 * t, (c.width - 184 * t) / 2, 1.5 * p.height); y.pivot(y.width / 2, y.height / 2), y.pos(c.width / 2 - y.width / 1.5, p.height + y.height + 50 * t), y.zOrder = 2, c.addChild(y); var w = this.getImage("kaishiyouxi/max.png", 188 * t, 51 * t, (c.width - 188 * t) / 2 + y.width / 1.5, y.y - 65 * t / 2); c.addChild(w), w.on(Laya.Event.CLICK, this, this.popupMax), c.height = p.height + y.height + w.height + w.height, new o.default(p, function () { }, !0).jelly(), c.pos((this.scene.width - c.width) / 2, f + h.height + p.height / 7); var m = !1, L = this; if (Laya.Browser.onMiniGame) { var v = Laya.Browser.window.wx; if (r.default.authorize) y.on(Laya.Event.CLICK, this, this.startBtn); else { var x = v.createUserInfoButton({ type: "image", image: "jiazai/startBg.jpg", style: { left: 0, top: 0, width: Laya.stage.width / 2, height: Laya.stage.height / 2, opacity: .1 } }); x.onTap(function (e) { if (!m) if (m = !0, e.errMsg.indexOf("auth deny") > -1 || e.errMsg.indexOf("auth denied") > -1) v.showToast({ title: "拒绝授权", icon: "", image: "jiazai/fails.png" }), m = !1; else if (e.errMsg.indexOf("getUserInfo:ok") > -1) { var t = 0 == r.default.userInv ? 0 : r.default.userInv + "," + r.default.userPage, a = JSON.parse(e.rawData), i = "" == a.avatarUrl ? "jiazai/d.png" : a.avatarUrl; r.default.userImg = i, r.default.nickName = a.nickName, new s.default("/EatChicken/user/authorization.action?position=" + encodeURIComponent(a.city) + "&nickName=" + encodeURIComponent(a.nickName) + "&headUrl=" + encodeURI(i) + "&gender=" + a.gender + "&inviteUserId=" + t, "get", {}, r.default.cookie, function (e) { x.destroy(), r.default.authorize = !0, m = !1, new l.default("授权成功!"), y.on(Laya.Event.CLICK, L, L.startBtn) }) } }) } } else y.on(Laya.Event.CLICK, this, this.startBtn); p.on(Laya.Event.CLICK, this, function (t) { r.default.nowLevel = 0, r.default.passLevel = 0, r.default.btPlay = !0, r.default.prop = { cz: 10, pen: 10, resetImg: 10, bomb: 10 }; var a = new Laya.Scene; a.loadScene("MyScene/Main.scene"), Laya.stage.addChild(a), e.scene.removeSelf() }), this.scene.addChild(c); var C = new Laya.Sprite, B = new Laya.Sprite; B.width = 113 * t; var I = this.getImage("kaishiyouxi/inv.png", 100 * t, 100 * t, 0, 0), b = this.getImage("kaishiyouxi/invTxt.png", 113 * t, 35 * t, 0, 111 * t), S = this.getImage("kaishiyouxi/red.png", 14 * t, 14 * t, 95 * t, 5 * t); B.height = b.height + I.height, B.addChild(b), B.addChild(I), I.pivot(I.width / 2, I.height / 2), I.pos(B.width / 2, I.height / 2), B.addChild(S), B.pos((this.scene.width - B.width) / 2 + 2 * B.width, I.height / 2); var N = new Laya.Sprite; N.width = 113 * t; var A = this.getImage("kaishiyouxi/rank.png", 116 * t, 104 * t, 0, 0), k = this.getImage("kaishiyouxi/rankTxt.png", 113 * t, 35 * t, 0, 111 * t), T = this.getImage("kaishiyouxi/red.png", 14 * t, 14 * t, 95 * t, 5 * t); N.height = k.height + A.height, N.addChild(k), N.addChild(A), A.pivot(A.width / 2, A.height / 2), A.pos(N.width / 2, A.height / 2), N.addChild(T), N.pos(B.x - 2 * B.width, A.height / 2); var O = new Laya.Sprite; O.width = 113 * t; var z = this.getImage("kaishiyouxi/ylikeTxt.png", 107 * t, 37 * t, 0, 111 * t), E = this.getImage("kaishiyouxi/cirBg.png", 116 * t, 104 * t, 0, 0); O.height = z.height + E.height, O.addChild(z), O.addChild(E), E.pivot(E.width / 2, E.height / 2), E.pos(O.width / 2, E.height / 2), Object.defineProperty(E, "appid", { value: "wxac913252ced539ee", writable: !0 }), O.pos(N.x - 2 * B.width, E.height / 2); var M = new Laya.Sprite, P = this.getImage("kaishiyouxi/cir.png", 73 * t, 73 * t, 0, 0), _ = this.getImage("kaishiyouxi/game.png", 73 * t, 73 * t, 0, 0); if (M.width = 73 * t, M.height = 73 * t, M.addChild(P), M.addChild(_), M.mask = P, M.pos((E.width - M.width) / 2, (E.height - M.height) / 2), E.addChild(M), C.addChild(B), C.addChild(N), C.addChild(O), C.pos(0, c.y + c.height / 2 + 260 * t), this.scene.addChild(C), I.on(Laya.Event.CLICK, this, this.openInvit), A.on(Laya.Event.CLICK, this, this.openRanking), E.on(Laya.Event.CLICK, this, this.openShare), r.default.authorize && !r.default.getDayGift) { var G = new n.default; this.scene.addChild(G), G.getDayGift(function (t) { 1 == t ? (r.default.zsNum += 300, new l.default("钻石+300")) : (r.default.zsNum += 100, new l.default("钻石+100")), e.jewelNum.text = "" + new d.default(r.default.zsNum).formatPointNumber() }) } -1 == r.default.nickName.indexOf("rdgztest") && -1 == r.default.nickName.indexOf("minigame") && -1 == r.default.nickName.indexOf("Lu。") && -1 == r.default.nickName.indexOf("水星") && -1 == r.default.nickName.indexOf("Fs") && -1 == r.default.nickName.indexOf("子昂2019") && -1 == r.default.nickName.indexOf("唐若") && -1 == r.default.nickName.indexOf("雨墨") || (B.visible = !1, N.pos(B.x, A.height / 2)) }, t.prototype.randomStar = function () { var e = Laya.Browser.window.scX, t = new Laya.Sprite, a = this.getImage("kaishiyouxi/star.png", 49 * e, 52 * e, -49 * e, this.scene.height / 1.4); a.pivot(a.width / 2, a.height / 2); var i = new Laya.TimeLine; i.to(a, { y: 80 * e, x: this.scene.width + 200 * e, rotation: 600 }, 1e3, Laya.Ease.linearInOut, 0), i.to(a, {}, 3e3, Laya.Ease.linearInOut, 0), i.to(a, { y: this.scene.height / 1.4, x: -49 * e, rotation: 0 }, 0, Laya.Ease.linearInOut, 0), i.play(0, !0); var n = this.getImage("kaishiyouxi/star.png", 49 * e, 52 * e, -49 * e, this.scene.height / 2); n.pivot(n.width / 2, n.height / 2); var o = new Laya.TimeLine; return o.to(n, { y: -200 * e, x: this.scene.width, rotation: 600 }, 1e3, Laya.Ease.linearInOut, 100), o.to(n, {}, 3e3, Laya.Ease.linearInOut, 0), o.to(n, { y: this.scene.height / 1.4, x: -49 * e, rotation: 0 }, 0, Laya.Ease.linearInOut, 0), o.play(0, !0), t.addChild(a), t.addChild(n), t }, t.prototype.floatRole = function () { var e = Laya.Browser.window.scX, t = new Laya.Sprite; t.width = this.scene.width, t.height = this.scene.height, t.pos(0, 0); var a = this.getImage("kaishiyouxi/gift1.png", 131 * e, 135 * e, 45 * e, 300 * e), i = this.getImage("kaishiyouxi/gift2.png", 131 * e, 136 * e, 590 * e, 360 * e), n = this.getImage("kaishiyouxi/gift3.png", 90 * e, 93 * e, 595 * e, 565 * e), o = this.getImage("kaishiyouxi/gift4.png", 106 * e, 111 * e, 70 * e, 675 * e); t.addChild(a), t.addChild(i), t.addChild(n), t.addChild(o); var r = new Laya.TimeLine, s = a.y; r.to(a, { y: s - 30 * e }, 3e3, Laya.Ease.linearInOut, 0), r.to(a, { y: s }, 3e3, Laya.Ease.linearInOut, 0), r.play(0, !0); var h = new Laya.TimeLine, d = i.y; h.to(i, { y: d - 40 * e }, 3e3, Laya.Ease.linearInOut, 0), h.to(i, { y: d }, 3e3, Laya.Ease.linearInOut, 0), h.play(0, !0); var l = new Laya.TimeLine, u = n.y; l.to(n, { y: u - 25 * e }, 3300, Laya.Ease.linearInOut, 0), l.to(n, { y: u }, 3300, Laya.Ease.linearInOut, 0), l.play(0, !0); var g = new Laya.TimeLine, f = o.y; return g.to(o, { y: f - 30 * e }, 4e3, Laya.Ease.linearInOut, 0), g.to(o, { y: f }, 4e3, Laya.Ease.linearInOut, 0), g.play(0, !0), t }, t.prototype.openRanking = function (e) { var t = this; new h.default("fenbao/shengyin/btn.mp3", !1, 1), this.openRank && (this.openRank = !1, new o.default(e.target, function (e) { var a = new n.default(function (e) { t.openRank = !0 }); t.scene.addChild(a), a.rankBox(), console.log("排行") }).jelly()) }, t.prototype.openInvit = function (e) { var t = this; new h.default("fenbao/shengyin/btn.mp3", !1, 1), this.openInv && (this.openInv = !1, new o.default(e.target, function (e) { var a = new n.default(function (e) { t.openInv = !0 }); t.scene.addChild(a), a.invGift(function (e) { r.default.zsNum += parseInt(e), t.jewelNum.text = "" + r.default.zsNum }), console.log("邀请"), t.openInv = !0 }).jelly()) }, t.prototype.openShare = function (e) { var t = this; if (new h.default("fenbao/shengyin/btn.mp3", !1, 1), this.openS) { this.openS = !1; var a = this, i = e.target; new o.default(i, function (e) { Laya.Browser.window.wx.navigateToMiniProgram({ appId: "" + i.appid, path: "pages/index/index?fromChannel=cjxxx", success: function (e) { a.openS = !1 }, fail: function (e) { a.openS = !1 } }), t.openS = !0 }).jelly() } }, t.prototype.randomNum = function (e, t) { return Math.floor(Math.random() * (t - e + 1) + e) }, t.prototype.randIcon = function () { }, t.prototype.popupMax = function () { var e = this; if (console.log("弹出最高纪录"), new h.default("fenbao/shengyin/btn.mp3", !1, 1), r.default.openSuccess) { r.default.openSuccess = !1; var t = new n.default; this.scene.addChild(t), t.continueGame(function (t) { if (1 == t) { r.default.btPlay = !1, r.default.prop = { cz: 1, pen: 1, resetImg: 1, bomb: 1 }; var a = new Laya.Scene; a.loadScene("MyScene/Main.scene"), Laya.stage.addChild(a), e.scene.removeSelf() } }) } }, t.prototype.startBtn = function (e) { var t = this; if (new h.default("fenbao/shengyin/btn.mp3", !1, 1), this.clickOk = !0, r.default.gameOver || null == r.default.saveLevelInfo) { r.default.nowLevel = 0, r.default.passLevel = 0, r.default.prop = { cz: 1, pen: 1, resetImg: 1, bomb: 1 }; var a = new Laya.Scene; a.loadScene("MyScene/Main.scene"), Laya.stage.addChild(a), this.scene.removeSelf() } else { var i = new n.default; this.scene.addChild(i), i.redSave(function (e) { if (1 == e) { r.default.nowLevel = 0, r.default.passLevel = 0, r.default.btPlay = !1, r.default.prop = { cz: 1, pen: 1, resetImg: 1, bomb: 1 }; var a = new Laya.Scene; a.loadScene("MyScene/Main.scene"), Laya.stage.addChild(a), t.scene.removeSelf() } else { r.default.useUpLevel = !0, r.default.btPlay = !1, r.default.userUpArr = r.default.saveLevelInfo.value, r.default.nowLevel = r.default.saveLevelInfo.checkpoint, r.default.userHp = r.default.saveLevelInfo.result, r.default.userNowHp = r.default.saveLevelInfo.surplusResult, r.default.passLevel = r.default.saveLevelInfo.maxResult, r.default.prop = r.default.saveLevelInfo.prop, r.default.showTxt = r.default.saveLevelInfo.showTxt; var a = new Laya.Scene; a.loadScene("MyScene/Main.scene"), Laya.stage.addChild(a), t.scene.removeSelf() } }) } console.log("开始游戏") }, t.prototype.getImage = function (e, t, a, i, n) { void 0 === i && (i = 0), void 0 === n && (n = 0); var o = new Laya.Sprite; return o.width = t, o.height = a, o.graphics.drawTexture(Laya.loader.getRes("" + e), 0, 0, t, a), o.pos(i, n), o }, t.prototype.moreGameList = function (e, t) { for (var a = this, n = 0, o = 0; o < e.length; ++o)Laya.loader.load("" + e[o].icon, null, Laya.Handler.create(this, function (o) { if (++n == e.length) { var r = Laya.Browser.window.scX, s = new Laya.List; s.itemRender = i.default, s.repeatX = 4, s.repeatY = 1, s.name = "layaList", s.x = 25 * r, s.y = 50 * r, s.width = 700 * r, s.spaceX = (700 * r - 103 * r * 4) / 3, s.hScrollBarSkin = "", s.selectEnable = !0; for (var d = [], l = 0; l < e.length; ++l) { var u = new Laya.Sprite; u.width = 103 * r, u.height = 103 * r, u.size(1, 1), u.pos(103 * r, 0); var g = new Laya.Sprite; g.width = 103 * r, g.height = 103 * r, g.graphics.drawTexture(Laya.loader.getRes("kaishiyouxi/gameCir.png"), 0, 0, 103 * r, 103 * r), g.pos(0, 0); var f = new Laya.Sprite; f.width = 103 * r, f.height = 103 * r, Object.defineProperty(f, "appId", { value: e[l].appid }), f.on(Laya.Event.CLICK, a, function (e) { new h.default("fenbao/shengyin/btn.mp3", !1, 1); var t = e.target; Laya.Browser.onMiniGame && Laya.Browser.window.wx.navigateToMiniProgram({ appId: t.appId, path: "page/index/index", extraData: { formChannel: "xmznxc" }, envVersion: "develop", success: function (e) { } }) }), f.graphics.drawTexture(Laya.loader.getRes("" + e[l].icon), 0, 0, 103 * r, 103 * r), f.pos(0, 0), u.addChild(g), u.addChild(f), u.mask = g, d.push(u) } s.array = d, t.addChild(s) } }, null, !1)) }, t }(Laya.Script); a.default = u }, { "../common/AllTip": 3, "../common/BtnAnimation": 4, "../common/FormatNumber": 5, "../common/SoundManager": 6, "../config/config": 9, "../popup/PopupManager": 17, "../request/GetData": 18, "./GameItem": 10 }], 12: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = e("../request/GetData"), n = e("../config/config"), o = e("../common/getCookie"), r = e("../share/Share"), s = function (e) { function t() { var t = e.call(this) || this; return t.fontLen = 0, t } return __extends(t, e), t.prototype.onEnable = function () { var e = this; if (Laya.Browser.onMiniGame) { var t = this.randomNum(0, n.default.shareText.length - 1); new r.default(t + 1, n.default.shareText[t]).passiveShare(n.default.shareText[t], 1) } console.log("加载界面!"), this.scene = this.owner, this.scene.width = Laya.stage.width, this.scene.height = Laya.stage.height; var a = Laya.Browser.window.scX, i = Laya.Browser.window.scY, o = this.scene.getChildByName("loading"); o.width = this.scene.width, o.height = this.scene.height; var s = this.scene.getChildByName("logo"), h = s.getBounds(); s.width = h.width * a, s.height = h.height * a, s.pos((Laya.stage.width - s.width) / 2, h.y * i); var d = new Laya.TimeLine, l = s.y; d.to(s, { y: l - 50 * a }, 3e3, Laya.Ease.linearInOut, 0), d.to(s, { y: l }, 3e3, Laya.Ease.linearInOut, 0), d.play(0, !0); var u = new Laya.Sprite; u.width = 616 * a, u.height = 41 * a, u.graphics.drawTexture(Laya.loader.getRes("jiazai/loadActive1.png"), 0, 0, 616 * a, 41 * a); var g = new Laya.Sprite, f = new Laya.Sprite; f.width = 600 * a, f.height = 22 * a, f.graphics.drawTexture(Laya.loader.getRes("jiazai/loadDefault.png"), 0, 0, 600 * a, 22 * a), f.pos(0, 0), this.lA = new Laya.Sprite, this.lA.width = 600 * a, this.lA.height = 22 * a, this.lA.graphics.drawTexture(Laya.loader.getRes("jiazai/loadActive.png"), 0, 0, 600 * a, 22 * a), this.lA.pos(-this.lA.width, 0), g.addChild(f), g.addChild(this.lA), g.mask = f, g.pos((this.scene.width - f.width) / 2 - 2, this.scene.height / 1.65 + 3), u.pos((this.scene.width - u.width) / 2, this.scene.height / 1.65), this.scene.addChild(u), this.scene.addChild(g), this.loadNum = new Laya.Text, this.loadNum.fontSize = 42 * a, this.loadNum.text = "0%", this.loadNum.align = "center", this.loadNum.font = "loadFont", this.loadNum.width = u.width, this.loadNum.pos(0, -this.loadNum.height / 1.15), u.addChild(this.loadNum); var c = this.scene.getChildByName("hethTip"), p = c.getBounds(); c.width = p.width * a, c.height = p.height * a, c.pos(p.x * a, this.scene.height - 1.4 * p.height); var y = [{ url: "MyScene/Main.json", type: Laya.Loader.JSON }, { url: "fenbao/res/atlas/zhuye.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/kaishiyouxi.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/paihangbang.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/fuhuo.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/daoju.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/meirilibao.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/yaoqing.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/jixuyouxi.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/baocun.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/donghua/chuizi.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/donghua/yanwu.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/donghua/baozha.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/tupian.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/xinzhuye.atlas", type: Laya.Loader.ATLAS }, { url: "res/atlas/ziti.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/zuanshi.atlas", type: Laya.Loader.ATLAS }, { url: "fenbao/res/atlas/guoguan.atlas", type: Laya.Loader.ATLAS }, { url: "lz.png", type: Laya.Loader.IMAGE }, { url: "paihangbang/rBg.png", type: Laya.Loader.IMAGE }, { url: "baocun/save.png", type: Laya.Loader.IMAGE }, { url: "paihangbang/right.png", type: Laya.Loader.IMAGE }, { url: "paihangbang/gz.png", type: Laya.Loader.IMAGE }, { url: "paihangbang/my.png", type: Laya.Loader.IMAGE }, { url: "daoju/popupBg.png", type: Laya.Loader.IMAGE }, { url: "daoju/cir.png", type: Laya.Loader.IMAGE }, { url: "fuhuo/beijing.png", type: Laya.Loader.IMAGE }, { url: "yaoqing/invBg.png", type: Laya.Loader.IMAGE }, { url: "yaoqing/right.png", type: Laya.Loader.IMAGE }, { url: "jixuyouxi/jxBg.png", type: Laya.Loader.IMAGE }, { url: "guoguan/passBg.png", type: Laya.Loader.IMAGE }, { url: "xinzhuye/mainBg.jpg", type: Laya.Loader.IMAGE }, { url: "xinzhuye/btmk.png", type: Laya.Loader.IMAGE }, { url: "xinzhuye/center.png", type: Laya.Loader.IMAGE }, { url: "xinzhuye/kk.png", type: Laya.Loader.IMAGE }, { url: "zuanshi/zsBg.png", type: Laya.Loader.IMAGE }]; Laya.loader.load(y, null, Laya.Handler.create(this, function (t) { e.onProgress(t) }, null, !1)) }, t.prototype.onProgress = function (e) { var t = this, a = 90 * e; if (this.lA.x = -this.lA.width + this.lA.width / 100 * a, this.loadNum.text = Math.floor(a) + "%", 1 == e) { for (var i, n = [{ name: "invFont", src: "ziti/invFont.fnt" }], o = 0; o < n.length; ++o)!function (e) { i = new Laya.BitmapFont, function (a) { a.loadFont(n[e].src, new Laya.Handler(t, function () { this.fontLen++ , a.setSpaceWidth(10), a.letterSpacing = 2, a.autoScaleSize = !0, Laya.Text.registerBitmapFont(n[e].name, a) }, [a])) }(i) }(o); Laya.timer.loop(1, this, this.loopMonitor, [n.length]) } }, t.prototype.loopMonitor = function (e) { void 0 === e && (e = 0), this.fontLen == e && (this.loadNum.text = "100%", Laya.timer.clear(this, this.loopMonitor), this.lA.x = 0, this.gameTip()) }, t.prototype.gameTip = function () { console.log("进入游戏主界面"); if (Laya.Browser.onMiniGame) { var e = Laya.Browser.window.wx; e.showLoading({ title: "Login..." }), e.login({ success: function (t) { e.getSystemInfo({ success: function (a) { new i.default("/EatChicken/user/code2accessToken.action?jsCode=" + t.code + "&clientSystemInfo=" + encodeURI(JSON.stringify(a)) + "&fromChannel=" + n.default.fromChannel + "&upUserId=" + n.default.upUserInfoId, "get", {}, n.default.cookie, function (t) { 0 != t.data.addDatas.resultlist.length && (n.default.cookie = new o.default(t).getCookie(), n.default.wqPZ = t.data.addDatas.resultlist[0], new i.default("/EatChicken/user/getUserInfos.action", "get", {}, n.default.cookie, function (t) { if (e.hideLoading(), 0 != t.data.addDatas.resultlist.length) { var a = t.data.addDatas.resultlist[0]; n.default.openId = a.openId, n.default.lookNum = a.lockAdNum, n.default.getDayGift = !!a.loginTaskNUm, n.default.fromChannel = a.fromChannel, n.default.zsNum = a.money < 0 ? 0 : a.money, n.default.authorize = a.isAuthorize, Laya.Browser.window.wx.userId = a.id, null != a.keepGame && (n.default.saveLevelInfo = JSON.parse(a.keepGame.value)); for (var i = a.userWeapons, o = 0; o < i.length; ++o)n.default.gone[o] = {}; for (var o = 0; o < i.length; ++o)2 == o ? (n.default.gone[o] = i[i.length - 1], n.default.gone[o].zdNum = 10, n.default.gone[o].name = "dgone", n.default.gone[o].id = i[i.length - 1].id) : o > 2 ? (n.default.gone[o] = i[o - 1], n.default.gone[o].zdNum = 2 * o, n.default.gone[o].name = 3 == o ? "bgone" : "jgone", n.default.gone[o].id = i[o - 1].id) : (n.default.gone[o] = i[o], n.default.gone[o].zdNum = 2 + 2 * o, n.default.gone[o].id = i[o].id, n.default.gone[o].name = 1 == o ? "cgone" : "sgone"); var r = new Laya.Scene; r.loadScene("MyScene/Home.scene"), Laya.stage.addChild(r) } })) }, function (e) { console.log(e) }) } }) } }) } else { var t = new Laya.Scene; t.loadScene("MyScene/Home.scene"), Laya.stage.addChild(t) } }, t.prototype.randomNum = function (e, t) { return Math.floor(Math.random() * (t - e + 1) + e) }, t }(Laya.Script); a.default = s }, { "../common/getCookie": 7, "../config/config": 9, "../request/GetData": 18, "../share/Share": 20 }], 13: [function (e, t, a) {
    Object.defineProperty(a, "__esModule", { value: !0 }); var i = e("../config/config"), n = e("../popup/PopupManager"), o = e("../request/GetData"), r = e("../common/AllTip"), s = e("../common/SoundManager"), h = e("../common/FormatNumber"), d = function () {
      function e(e, t, a) { if (this.starArr = [], this.row = 10, this.clos = 8, this.commStar = [], this.IMGARR = ["red", "blue", "gay", "yellow", "green"], this.PROPARR = ["gcz", "glx", "greset", "gsz"], this.gameEnd = !1, this.te = 0, this.cached = !1, this.tipNum = 3, this.useBS = !1, this.useCZ = !1, this.alivePopup = !1, this.doubleIndex = 0, this.useStar = !1, this.starIndexArr = [], this.account = !1, this.endLen = 0, this.aliveOk = !0, this.accountScore = 2e3, this.showTxt = !1, this.gameOvers = !1, this.useCZOk = !1, this.playFlag = !1, this.rolePlay = !1, this.boxY = 0, this.btNum = 0, !this.cached) { this.cached = !0; for (var n = [], o = [], r = [], s = 0; s < 5; ++s)n.push("donghua/baozha/bz" + (s + 1) + ".png"); Laya.Animation.createFrames(n, "bz"), n = [], [], [], [], []; for (var s = 5; s < 9; ++s)n.push("donghua/baozha/bz" + (s + 1) + ".png"); for (var s = 0; s < 3; ++s)r.push("donghua/chuizi/lb" + (s + 1) + ".png"); for (var s = 0; s < 17; ++s)o.push("donghua/yanwu/yw" + (s + 1) + ".png"); Laya.Animation.createFrames(n, "bz1"), Laya.Animation.createFrames(r, "percussion"), Laya.Animation.createFrames(o, "yw") } this.role = t, this.main = a, this.initRoleBox(e), Laya.timer.loop(1e3, this, this.loop), Laya.timer.loop(3e3, this, this.saveUserInfo), this.boxY = e, i.default.gameOver = !1, this.addParBox() } return e.prototype.initRoleBox = function (e) {
        var t = Laya.Browser.window.scX; -1 != i.default.nickName.indexOf("rdgztest") || -1 != i.default.nickName.indexOf("minigame") || -1 != i.default.nickName.indexOf("Lu。") || -1 != i.default.nickName.indexOf("水星") || -1 != i.default.nickName.indexOf("Fs") || -1 != i.default.nickName.indexOf("子昂2019") || -1 != i.default.nickName.indexOf("唐若") || -1 != i.default.nickName.indexOf("雨墨") ? (this.roleBox = this.getImage("xinzhuye/kk.png", 750 * t, 900 * t, 0, e), this.row = 10, this.clos = 10) : this.roleBox = this.getImage("xinzhuye/kk.png", 750 * t, 696 * t, 0, e),
          Laya.stage.addChild(this.roleBox), this.initStarArray()
      }, e.prototype.getImage = function (e, t, a, i, n) { void 0 === i && (i = 0), void 0 === n && (n = 0); var o = new Laya.Sprite; return o.width = t, o.height = a, o.graphics.drawTexture(Laya.loader.getRes("" + e), 0, 0, t, a), o.pos(i, n), o }, e.prototype.initStarArray = function () { null != Laya.stage.getChildByName("tipNum") && Laya.stage.removeChildByName("tipNum"), null != Laya.stage.getChildByName("tipNum1") && Laya.stage.removeChildByName("tipNum1"), i.default.levelGetNum = 1, this.accountScore = 2e3; var e = 0, t = []; if (i.default.useUpLevel && 0 != i.default.userUpArr.length) { for (var a = 0; a < this.row; ++a) { this.starIndexArr[a] = [], this.starArr[a] = []; for (var n = 0; n < this.clos; ++n)this.starArr[a][n] = i.default.userUpArr[e], this.starIndexArr[a][n] = e++ } i.default.showTxt && (this.showTxt = !0, i.default.passOk || (this.conPass(), i.default.passOk = !0)) } else { if (i.default.btPlay) if (++this.btNum <= 3) var o = this.randomNum(1, 5), r = o; else if (this.btNum > 3 && this.btNum <= 7) { var s = this.randomNum(1, 5); if (s > 4) var o = s - 1, r = s; else var o = s, r = s + 1 } else if (this.btNum > 7 && this.btNum <= 12) { var s = this.randomNum(1, 5); if (s > 3) var o = s - 2, r = s; else var o = s, r = s + 2 } else if (this.btNum > 12 && this.btNum <= 18) { var s = this.randomNum(1, 5); if (s > 2) var o = s - 3, r = s; else var o = s, r = s + 3 } else var o = 1, r = 5; else var o = 1, r = 5; for (var a = 0; a < this.row; ++a) { t[a] = [], this.starIndexArr[a] = []; for (var n = 0; n < this.clos; ++n) { var h = this.randomNum(o, r); t[a][n] = h, this.starIndexArr[a][n] = e++ } } this.starArr = this.sortDoubleArr(t), this.showTxt = !1, i.default.passOk = !1, this.main.setPassOk(!1) } i.default.useUpLevel ? this.addRole(this.starArr, !0) : this.addRole(this.starArr), this.main.setNextLevel(i.default.passLevel) }, e.prototype.addRole = function (e, t) { void 0 === t && (t = !1); for (var a = 0, o = this, h = 0; h < this.row; ++h)for (var d = 0; d < this.clos; ++d) { if (0 != e[h][d]) { var l = new Laya.Sprite; l.width = 74 * Laya.Browser.window.scX, l.height = 81 * Laya.Browser.window.scX, l.pivot(l.width / 2, l.height / 2), l.graphics.drawTexture(Laya.loader.getRes("tupian/" + this.IMGARR[e[h][d] - 1] + ".png"), 0, 0, 74 * Laya.Browser.window.scX, 81 * Laya.Browser.window.scX), l.index = a, l.start = a, l.kills = !1, l.name = "role" + a, l.colors = e[h][d], l.on(Laya.Event.CLICK, this, this.roleClick), l.size(this.rowWidth(), this.rowWidth()), t ? l.pos(l.width / 2 + this.rowWidth() * h + 3 * Laya.Browser.window.scX, l.height / 2 + d * this.rowWidth() + 12 * Laya.Browser.window.scX + 7 * Laya.Browser.window.scX * d) : (l.pos(l.width / 2 + this.rowWidth() * h + 3 * Laya.Browser.window.scX, -l.height / 2 - (e.length - d) * this.rowWidth()), Laya.Tween.to(l, { y: l.height / 2 + d * this.rowWidth() + 12 * Laya.Browser.window.scX + 7 * Laya.Browser.window.scX * d }, 1e3, Laya.Ease.elasticOut, Laya.Handler.create(this, function (e) { }), 30 * h)), this.roleBox.addChild(l) } a++ } if (i.default.useUpLevel && (i.default.useUpLevel = !1, this.gameOver())) { if (i.default.passOk) return void o.accountGame(); var u = new n.default; Laya.stage.addChild(u), u.alivePopup(function (e) { new s.default("fenbao/shengyin/fail.mp3", !1, 1), -1 == e ? (o.accountGame(!1), Laya.timer.clear(o, o.saveUserInfo), i.default.saveLevelInfo = null) : 4 == e && (console.log("继续游戏"), new r.default("暂未开放"), o.refresh(), o.accountGame(!1), o.gameOvers = !1, Laya.timer.clear(o, o.saveUserInfo), i.default.saveLevelInfo = null) }), u.zOrder = 8 } }, e.prototype.roleClick = function (e) { if (new s.default("fenbao/shengyin/btn.mp3", !1, 1), !this.account && !this.gameEnd) { this.gameEnd = !0, this.tipNum = 3; var t = e.target; if (this.useBS) return this.userHammer(t.index), void (this.gameEnd = !1); if (this.useCZ) return this.usePercussion(t.index), this.useCZOk = !1, void (this.gameEnd = !1); if (this.useStar) return void (this.gameEnd = !1); this.playFlag && (this.clearAnimation(this.commStar), this.playFlag = !1), this.commStar = [], this.getCommStar(t.index), this.clearStar(this.commStar, t.index) } }, e.prototype.rowWidth = function () { return 746 * Laya.Browser.window.scX / 10 }, e.prototype.gameOver = function () { for (var e = 0; e < this.row * this.clos; e++) { var t = this.getPos(e); if (this.starArr[t.x][t.y]) { var a = this.getPos(e - 1), i = this.getPos(e + 1), n = this.getPos(e - this.clos), o = this.getPos(e + this.clos); if (t.y > 0 && t.x >= 0 && this.starArr[a.x][a.y] == this.starArr[t.x][t.y]) return !1; if (t.y < this.clos - 1 && t.x >= 0 && this.starArr[i.x][i.y] == this.starArr[t.x][t.y]) return !1; if (t.x > 0 && t.y >= 0 && this.starArr[n.x][n.y] == this.starArr[t.x][t.y]) return !1; if (t.x < this.row - 1 && t.y >= 0 && this.starArr[o.x][o.y] == this.starArr[t.x][t.y]) return !1 } } return !0 }, e.prototype.getPos = function (e) { return { x: Math.floor(e / this.clos), y: e % this.clos } }, e.prototype.getCommStar = function (e) { this.commStar.push(e), this.setRoleSelect(e); var t = this.getPos(e), a = this.getPos(e - 1), i = this.getPos(e + 1), n = this.getPos(e - this.clos), o = this.getPos(e + this.clos); t.y > 0 && t.x >= 0 && this.commStar.indexOf(e - 1) < 0 && this.starArr[a.x][a.y] == this.starArr[t.x][t.y] && this.getCommStar(e - 1), t.y < this.clos - 1 && t.x >= 0 && this.commStar.indexOf(e + 1) < 0 && this.starArr[i.x][i.y] == this.starArr[t.x][t.y] && this.getCommStar(e + 1), t.x > 0 && t.y >= 0 && this.commStar.indexOf(e - this.clos) < 0 && this.starArr[n.x][n.y] == this.starArr[t.x][t.y] && this.getCommStar(e - this.clos), t.x < this.row - 1 && t.y >= 0 && this.commStar.indexOf(e + this.clos) < 0 && this.starArr[o.x][o.y] == this.starArr[t.x][t.y] && this.getCommStar(e + this.clos) }, e.prototype.playAnimation = function (e, t, a, o, d, l) { void 0 === a && (a = 50), void 0 === o && (o = 0), void 0 === d && (d = !1), void 0 === l && (l = 0); var u = this; u.useStar || new s.default("fenbao/shengyin/xc.mp3", !1, .5); var g = new Laya.Animation; g.interval = a, g.on(Laya.Event.COMPLETE, this, function (e) { if (g.removeSelf(), u.playAnimationLast("bz1", t, a), d) 0 == o && (-1 == i.default.nickName.indexOf("rdgztest") && -1 == i.default.nickName.indexOf("minigame") && -1 == i.default.nickName.indexOf("Lu。") && -1 == i.default.nickName.indexOf("水星") && -1 == i.default.nickName.indexOf("Fs") && -1 == i.default.nickName.indexOf("子昂2019") && -1 == i.default.nickName.indexOf("唐若") && -1 == i.default.nickName.indexOf("雨墨") || (i.default.testHp -= 10 * l, this.main.nowGold.text = "本局目标：" + new h.default(i.default.testHp).formatPointNumber()), u.setAccountData(u.aliveOk, 1)); else if (0 == o) { if (-1 == i.default.nickName.indexOf("rdgztest") && -1 == i.default.nickName.indexOf("minigame") && -1 == i.default.nickName.indexOf("Lu。") && -1 == i.default.nickName.indexOf("水星") && -1 == i.default.nickName.indexOf("Fs") && -1 == i.default.nickName.indexOf("子昂2019") && -1 == i.default.nickName.indexOf("唐若") && -1 == i.default.nickName.indexOf("雨墨") || (i.default.testHp -= 10 * l, this.main.nowGold.text = "本局目标：" + new h.default(i.default.testHp).formatPointNumber()), l >= 7) { var f = new n.default; f.name = "getDayGift", Laya.stage.addChild(f), f.zOrder = 6, f.getProp(u.PROPARR[u.randomNum(0, u.PROPARR.length - 1)], 1, u.main) } if (u.moveRole(), u.gameOvers) { if (u.alivePopup) return; u.alivePopup = !0, setTimeout(function () { if (i.default.passOk) return u.alivePopup = !1, u.gameOvers = !1, void u.accountGame(); var e = new n.default; Laya.stage.addChild(e), e.alivePopup(function (e) { new s.default("fenbao/shengyin/fail.mp3", !1, 1), -1 == e ? (u.accountGame(!1), Laya.timer.clear(u, u.saveUserInfo), i.default.saveLevelInfo = null) : 4 == e && (console.log("继续游戏"), new r.default("暂未开放"), u.refresh(), u.accountGame(!1), u.gameOvers = !1, Laya.timer.clear(u, u.saveUserInfo), i.default.saveLevelInfo = null) }), e.zOrder = 8 }, 800), u.useStar && (u.useStar = !1) } else u.tipNum = 3, u.gameEnd = !1, u.useStar && (u.useStar = !1) } }), g.play(0, !1, "bz"), g.zOrder = 10; var f = g.getBounds(); g.pos(this.roleBox.x + t.x + (t.width - f.width) / 2 - t.width / 2, this.roleBox.y + t.y + (t.height - f.height) / 1.75), Laya.stage.addChild(g) }, e.prototype.playAnimationLast = function (e, t, a) { void 0 === a && (a = 20); var i = new Laya.Animation; i.interval = a, i.on(Laya.Event.COMPLETE, this, function (e) { i.removeSelf() }), i.play(0, !1, "" + e), i.zOrder = 10; var n = i.getBounds(); i.pos(this.roleBox.x + t.x + (t.width - n.width) / 2 - t.width / 2, this.roleBox.y + t.y + (t.height - n.height) / 1.75), Laya.stage.addChild(i) }, e.prototype.setAccountData = function (e, t) { var a = this; if (e) if (i.default.userNowHp > this.accountScore) i.default.userNowHp -= this.accountScore, this.main.setProsPos(), this.roleBox.removeChildren(), Laya.stage.removeChildByName("tipNum"), setTimeout(function () { a.initStarArray(), a.tipNum = 3, a.gameEnd = !1, a.account = !1 }, 1500); else { var n = this.accountScore - i.default.userNowHp; i.default.userNowHp = 0, i.default.nowLevel++ , this.main.setRoleImg(i.default.nowLevel), this.main.leftTopImg(parseInt(i.default.nowLevel) + 1), i.default.passOk || (this.conPass(), i.default.passLevel++ , i.default.passOk = !0), this.main.setLevel(i.default.nowLevel), i.default.nowLevel > 4 ? (i.default.userHp = i.default.bossHpArr[i.default.bossHpArr.length - 1] + 100 * (i.default.nowLevel - 1), i.default.userNowHp = i.default.bossHpArr[i.default.bossHpArr.length - 1] + 100 * (i.default.nowLevel - 1) - n) : (i.default.userHp = i.default.bossHpArr[i.default.nowLevel], i.default.userNowHp = i.default.bossHpArr[i.default.nowLevel] - n), this.main.setProsPos(), Laya.stage.removeChildByName("tipNum"), this.roleBox.removeChildren(), setTimeout(function () { a.initStarArray(), a.tipNum = 3, a.gameEnd = !1, a.account = !1 }, 1500) } else if (i.default.userNowHp > this.accountScore) { if (i.default.userNowHp -= this.accountScore, this.main.setProsPos(), Laya.Browser.onMiniGame) { var r = Laya.Browser.window.wx.getOpenDataContext(); r.postMessage({ action: "clear" }), r.postMessage({ action: "set", score: i.default.nowLevel }) } new o.default("/EatChicken/user/gameOver.action?maxResult=" + (i.default.userHp - i.default.userNowHp) + "&checkpoint=" + i.default.nowLevel, "get", {}, i.default.cookie, function (e) { setTimeout(function () { null != Laya.stage.getChildByName("tipNum") && Laya.stage.removeChildByName("tipNum"), null != Laya.stage.getChildByName("tipNum1") && Laya.stage.removeChildByName("tipNum1"), void 0 != a.prBox && Laya.stage.removeChild(a.prBox); var e = new Laya.Scene; e.loadScene("MyScene/Home.scene"), Laya.stage.addChild(e), a.main.scene.removeSelf() }, 1500) }) } else { var n = this.accountScore - i.default.userNowHp; i.default.userNowHp = 0, i.default.nowLevel++ , this.main.setRoleImg(i.default.nowLevel), this.main.leftTopImg(parseInt(i.default.nowLevel) + 1), i.default.passOk || (this.conPass(), Laya.stage.removeChildByName("tipNum"), i.default.passLevel++ , i.default.passOk = !0, this.roleBox.removeChildren(), setTimeout(function () { a.initStarArray(), a.tipNum = 3, a.gameEnd = !1, a.account = !1 }, 1e3)), this.main.setLevel(i.default.nowLevel), i.default.nowLevel > 4 ? (i.default.userHp = i.default.bossHpArr[i.default.bossHpArr.length - 1] + 100 * (i.default.nowLevel - 1), i.default.userNowHp = i.default.bossHpArr[i.default.bossHpArr.length - 1] + 100 * (i.default.nowLevel - 1) - n) : (i.default.userHp = i.default.bossHpArr[i.default.nowLevel], i.default.userNowHp = i.default.bossHpArr[i.default.nowLevel] - n), this.main.setProsPos() } }, e.prototype.delRandom = function (e) { for (var t = this.flatten(this.starArr), a = [], i = 0; i < t.length; ++i)0 != t[i] && a.push(i); for (var n = 0, i = (this.starArr, 0); i < this.row; ++i)for (var o = 0; o < this.clos; ++o)n++; var r = []; if (a.length >= e) for (var i = 0; i < e; ++i) { var s = this.randomNum(0, a.length - 1); if (-1 != r.indexOf(a[s])) for (; ;) { var h = this.randomNum(0, a.length - 1); if (-1 == r.indexOf(a[h])) { r.push(a[h]); break } } else r.push(a[s]) } else for (var i = 0; i < a.length; ++i)r.push(a[i]); return this.commStar = [], r }, e.prototype.setRoleSelect = function (e) { for (var t = 0; t < this.roleBox._children.length; ++t)this.roleBox._children[t].index == e && (this.roleBox._children[t].rotation = 0) }, e.prototype.clearRoleSelect = function () { for (var e = 0; e < this.roleBox._children.length; ++e)this.roleBox._children[e].rotation = 0 }, e.prototype.clearStar = function (e, t, a, n) { var o = this; if (void 0 === a && (a = !1), void 0 === n && (n = !1), !a && e.length < 2) return this.gameEnd = !1, void this.clearRoleSelect(); for (var r = [], s = [], h = 0; h < e.length; ++h)r[h] = [], s[h] = []; for (var h = 0; h < this.roleBox._children.length; ++h) { var d = e.indexOf(this.roleBox._children[h].index); if (-1 != d) { var l = this.getPos(this.roleBox._children[h].index); this.roleBox._children[h].kills = !0, r[d] = this.roleBox._children[h], s[d] = this.starArr[l.x][l.y], this.starArr[l.x][l.y] = 0 } } if (this.account || (this.moveDown(), this.moveLeft()), this.gameOvers = this.gameOver(), this.gameEnd = !0, n) for (var h = 0; h < r.length; ++h)!function (e, t, a, n, s) { setTimeout(function () { var h = o.getPos(t.index), d = e, l = t, u = n, g = s; o.sendParticle(Laya.stage.width / 4 * 3 + (Laya.stage.width / 4 - 95 * Laya.Browser.window.scX) / 2 + 95 * Laya.Browser.window.scX / 2, 1160 * Laya.Browser.window.scY + 95 * Laya.Browser.window.scX / 2, 30 * Laya.Browser.window.scX + o.rowWidth() / 2 + h.x * o.rowWidth(), o.boxY + o.rowWidth() / 2 + h.y * o.rowWidth(), a, r.length, function () { o.roleBox.removeChild(l), -1 == i.default.nickName.indexOf("rdgztest") && -1 == i.default.nickName.indexOf("minigame") && -1 == i.default.nickName.indexOf("Lu。") && -1 == i.default.nickName.indexOf("水星") && -1 == i.default.nickName.indexOf("Fs") && -1 == i.default.nickName.indexOf("子昂2019") && -1 == i.default.nickName.indexOf("唐若") && -1 == i.default.nickName.indexOf("雨墨") && o.flayProp(e + "p", t, s), o.playAnimation("" + d, l, 50, u, !1, g) }) }, 300 * a) }(this.IMGARR[s[h] - 1], r[h], h, r.length - h - 1, r.length); else for (var h = 0; h < r.length; ++h)this.account ? (this.roleBox.removeChild(r[h]), this.endLen -= 1, this.playAnimation("" + this.IMGARR[s[h] - 1], r[h], 50, this.endLen, !0)) : function (e, t, a, n, r) { setTimeout(function () { o.roleBox.removeChild(t), -1 == i.default.nickName.indexOf("rdgztest") && -1 == i.default.nickName.indexOf("minigame") && -1 == i.default.nickName.indexOf("Lu。") && -1 == i.default.nickName.indexOf("水星") && -1 == i.default.nickName.indexOf("Fs") && -1 == i.default.nickName.indexOf("子昂2019") && -1 == i.default.nickName.indexOf("唐若") && -1 == i.default.nickName.indexOf("雨墨") && o.flayProp(e + "p", t, r), o.playAnimation("" + e, t, 50, n, !1, r) }, 50 * a) }(this.IMGARR[s[h] - 1], r[h], h, r.length - h - 1, r.length) }, e.prototype.centerToBound = function (e, t, a) { for (var i = 0, n = 0; n < a.length; ++n)a[n].index == e && (i = n); for (var n = 0; n < t.length; ++n)if (-1 != t.indexOf(e)) { t.splice(n, 1); break } this.roleBox.removeChild(a[i]), -1 != t.indexOf(e - 1) && this.centerToBound(e - 1, t, a), -1 != t.indexOf(e - this.clos) && this.centerToBound(e - this.clos, t, a), -1 != t.indexOf(e + this.clos) && this.centerToBound(e + this.clos, t, a), -1 != t.indexOf(e + 1) && this.centerToBound(e + 1, t, a) }, e.prototype.moveDown = function (e) { void 0 === e && (e = !0); for (var t = 0; t < this.row; t++)for (var a = 0, i = this.clos - 1 + t * this.clos; i >= t * this.clos; i--) { var n = this.getPos(i); if (this.starArr[n.x][n.y]) { if (a) { var o = this.getPos(i + a); this.starArr[o.x][o.y] = this.starArr[n.x][n.y], this.starArr[n.x][n.y] = 0, e && this.setRoleSEIndex(i, i + a) } } else a++ } }, e.prototype.moveRole = function () { for (var e = 0; e < this.roleBox._children.length; ++e)if (!this.roleBox._children[e].kills) { var t = this.getPos(this.roleBox._children[e].index); this.roleBox._children[e].tweens = Laya.Tween.to(this.roleBox._children[e], { y: (this.rowWidth() - this.roleBox._children[e].height) / 2 + this.roleBox._children[e].height / 2 + t.y * this.rowWidth() + 12 * Laya.Browser.window.scX + 7 * Laya.Browser.window.scX * t.y, x: (this.rowWidth() - this.roleBox._children[e].width) / 2 + this.roleBox._children[e].width / 2 + t.x * this.rowWidth() + 3 * Laya.Browser.window.scX, update: Laya.Handler.create(this, function (e) { }) }, 300, Laya.Ease.expoInOut, Laya.Handler.create(this, function (e) { }), 0) } }, e.prototype.setRoleSEIndex = function (e, t) { for (var a = 0; a < this.roleBox._children.length; ++a)if (this.roleBox._children[a].index == e && !this.roleBox._children[a].kills) { this.roleBox._children[a].start = e, this.roleBox._children[a].index = t, this.roleBox._children[a].name = "role" + t; break } }, e.prototype.sortDoubleArr = function (e) { var t = this.flatten(e); t.sort(function () { return .5 - Math.random() }); for (var a = 0, i = 0; i < this.row; ++i)for (var n = 0; n < this.clos; ++n)0 != e[i][n] && (e[i][n] = t[a], a++); return e }, e.prototype.refresh = function () { for (var e = this, t = 0, a = [], i = 0; i < this.roleBox._children.length; ++i)a.push(this.roleBox._children[i].index); a.sort(function () { return .5 - Math.random() }); for (var n = [], i = 0; i < this.row; ++i) { n[i] = []; for (var o = 0; o < this.clos; ++o)n[i][o] = this.starArr[i][o] } for (var r = this.flatten(n), i = 0; i < r.length; ++i)if (0 != r[i]) { var s = r[i]; r[i] = r[a[t]], r[a[t]] = s, t++ } t = 0; for (var i = 0; i < this.row; ++i)for (var o = 0; o < this.clos; ++o)this.starArr[i][o] = r[t], t++; if (this.gameOver()) this.refresh(); else { t = 0, this.te = 0; for (var i = 0; i < this.row; ++i)for (var o = 0; o < this.clos; ++o)if (0 != this.starArr[i][o]) { var h = this.roleBox.getChildByName("role" + a[t]); Laya.Tween.to(h, { y: (this.rowWidth() - h.height) / 2 + h.height / 2 + i * this.rowWidth() + 12 * Laya.Browser.window.scX + 7 * Laya.Browser.window.scX * o, x: (this.rowWidth() - h.width) / 2 + h.width / 2 + o * this.rowWidth() + 3 * Laya.Browser.window.scX, update: Laya.Handler.create(this, function (e) { }) }, 100, Laya.Ease.linearOut, Laya.Handler.create(this, function (t) { e.te++ }), 0), t++ } t = 0, Laya.timer.loop(1, this, this.exchangeRoleBox) } }, e.prototype.exchangeRoleBox = function () { this.te == this.roleBox._children.length && (this.te = 0, this.gameEnd = !1, this.clearTimer(), this.roleBox.removeChildren(), this.addRole(this.starArr, !0)) }, e.prototype.clearTimer = function () { Laya.timer.clear(this, this.exchangeRoleBox) }, e.prototype.flatten = function (e) { var t = this; return [].concat.apply([], e.map(function (e) { return Array.isArray(e) ? t.flatten(e) : e })) }, e.prototype.moveLeft = function (e) { void 0 === e && (e = !0); for (var t = 0, a = 1, i = 0; i < this.row; i++) { a = 1; for (var n = this.clos - 1 + i * this.clos; n >= i * this.clos; n--) { var o = this.getPos(n); if (this.starArr[o.x][o.y]) { a = 0; break } } a ? t++ : t && this.moveLeftLine(i, t, e) } }, e.prototype.moveLeftLine = function (e, t, a) { for (var i = this.clos - 1 + e * this.clos; i >= e * this.clos; i--) { var n = this.getPos(i - t * this.clos), o = this.getPos(i); this.starArr[n.x][n.y] = this.starArr[o.x][o.y], this.starArr[o.x][o.y] = 0, a && this.setRoleSEIndex(i, i - t * this.clos) } }, e.prototype.randomNum = function (e, t) { return Math.floor(Math.random() * (t - e + 1) + e) }, e.prototype.searchCommMax = function () { for (var e = [], t = 0; t < this.roleBox._children.length; ++t)this.commStar = [], this.getCommStar(this.roleBox._children[t].index), e.length < this.commStar.length && (e = this.commStar); return e }, e.prototype.giveUserTip = function () { this.commStar = this.searchCommMax(), this.commStar.length < 2 && (this.commStar = []); for (var e = 0; e < this.roleBox._children.length; ++e)-1 != this.commStar.indexOf(this.roleBox._children[e].index) && this.scaleAnimation(this.roleBox._children[e]) }, e.prototype.scaleAnimation = function (e) { var t = this; e.scaleX = .9, e.scaleY = .9; var a = new Laya.Tween; a.to(e, { scaleX: .7, scaleY: .7 }, 1e3, Laya.Ease.linearInOut, new Laya.Handler(this, function () { a.to(e, { scaleX: .9, scaleY: .9 }, 1e3, Laya.Ease.linearInOut, new Laya.Handler(t, function () { Laya.Tween.clearTween(e), t.scaleAnimation(e) }), 0) }), 0) }, e.prototype.clearAnimation = function (e) { for (var t = 0; t < this.roleBox._children.length; ++t)-1 != e.indexOf(this.roleBox._children[t].index) && (Laya.Tween.clearTween(this.roleBox._children[t]), this.roleBox._children[t].scaleX = 1, this.roleBox._children[t].scaleY = 1) }, e.prototype.clearAnimationAll = function () { for (var e = 0; e < this.roleBox._children.length; ++e)Laya.Tween.clearTween(this.roleBox._children[e]), this.roleBox._children[e].scaleX = 1, this.roleBox._children[e].scaleY = 1 }, e.prototype.loop = function () { 0 !== --this.tipNum || this.useBS || this.useCZ || this.gameEnd || this.useStar || this.account || (this.playFlag = !0, this.giveUserTip()) }, e.prototype.userHammer = function (e) { var t = this; this.clearAnimationAll(), this.tipNum = 3; var a = Laya.Browser.window.scX; null != Laya.stage.getChildByName("bskk") && Laya.stage.removeChildByName("bskk"); for (var n, o = 0; o < this.roleBox._children.length; ++o)Laya.Tween.clearTween(this.roleBox._children[o]), this.roleBox._children[o].index == e && (n = this.roleBox._children[o]); var r = this.getPos(e), h = 0; h = r.x < 3 ? 0 : r.x > 6 ? Laya.stage.width - 441 * a : n.x + this.roleBox.x - 441 * a / 2; var d = this.getImage("zhuye/bskk.png", 441 * a, 88 * a, h, this.roleBox.y + n.y - n.height / 2 - 88 * a); d.zOrder = 88, d.name = "bskk"; for (var l = this.IMGARR[this.starArr[r.x][r.y] - 1], u = [], o = 0; o < this.IMGARR.length; ++o)this.IMGARR[o] != l && u.push(this.IMGARR[o]); this.scaleAnimation(n); var g = this.getImage("tupian/" + u[0] + ".png", 69 * a, 73 * a, 15 * a, (d.height - 73 * a) / 2); Object.defineProperty(g, "colorIndex", { value: this.colorIndex(u[0]) }); var f = this.getImage("tupian/" + u[1] + ".png", 69 * a, 73 * a, 15 * a + 84 * a, (d.height - 73 * a) / 2); Object.defineProperty(f, "colorIndex", { value: this.colorIndex(u[1]) }); var c = this.getImage("tupian/" + u[2] + ".png", 69 * a, 73 * a, 15 * a + 84 * a * 2, (d.height - 73 * a) / 2); Object.defineProperty(c, "colorIndex", { value: this.colorIndex(u[2]) }); var p = this.getImage("tupian/" + u[3] + ".png", 69 * a, 73 * a, 15 * a + 84 * a * 3, (d.height - 73 * a) / 2); Object.defineProperty(p, "colorIndex", { value: this.colorIndex(u[3]) }); var y = this.getImage("zhuye/jt.png", 47 * a, 52 * a, 30 * a + 84 * a * 4, (d.height - 52 * a) / 2); g.on(Laya.Event.CLICK, this, function (e) { new s.default("fenbao/shengyin/yanwudan.mp3", !1, 1); var o = e.target; t.ywAnimation(n), setTimeout(function () { null != Laya.stage.getChildByName("bskk") && Laya.stage.removeChildByName("bskk"), Laya.Tween.clearTween(n), t.starArr[r.x][r.y] = parseInt(o.colorIndex) + 1, n.graphics.clear(); var e = Laya.loader.getRes("tupian/" + t.IMGARR[o.colorIndex] + ".png"); n.graphics.drawTexture(e, 0, 0, 74 * a, 81 * a), n.scaleX = 1, n.scaleY = 1, n.size(t.rowWidth(), t.rowWidth()), i.default.confirmBS = 1 }, 50) }), f.on(Laya.Event.CLICK, this, function (e) { new s.default("fenbao/shengyin/yanwudan.mp3", !1, 1); var o = e.target; t.ywAnimation(n), setTimeout(function () { null != Laya.stage.getChildByName("bskk") && Laya.stage.removeChildByName("bskk"), Laya.Tween.clearTween(n), t.starArr[r.x][r.y] = parseInt(o.colorIndex) + 1, n.graphics.clear(); var e = Laya.loader.getRes("tupian/" + t.IMGARR[o.colorIndex] + ".png"); n.graphics.drawTexture(e, 0, 0, 74 * a, 81 * a), n.size(t.rowWidth(), t.rowWidth()), n.scaleX = 1, n.scaleY = 1, i.default.confirmBS = 1 }) }), c.on(Laya.Event.CLICK, this, function (e) { new s.default("fenbao/shengyin/yanwudan.mp3", !1, 1), t.ywAnimation(n), setTimeout(function () { null != Laya.stage.getChildByName("bskk") && Laya.stage.removeChildByName("bskk"), Laya.Tween.clearTween(n); var o = e.target; t.starArr[r.x][r.y] = parseInt(o.colorIndex) + 1, n.graphics.clear(); var s = Laya.loader.getRes("tupian/" + t.IMGARR[o.colorIndex] + ".png"); n.graphics.drawTexture(s, 0, 0, 74 * a, 81 * a), n.size(t.rowWidth(), t.rowWidth()), n.scaleX = 1, n.scaleY = 1, i.default.confirmBS = 1 }) }), p.on(Laya.Event.CLICK, this, function (e) { new s.default("fenbao/shengyin/yanwudan.mp3", !1, 1), t.ywAnimation(n), setTimeout(function () { null != Laya.stage.getChildByName("bskk") && Laya.stage.removeChildByName("bskk"), Laya.Tween.clearTween(n); var o = e.target; t.starArr[r.x][r.y] = parseInt(o.colorIndex) + 1, n.graphics.clear(); var s = Laya.loader.getRes("tupian/" + t.IMGARR[o.colorIndex] + ".png"); n.graphics.drawTexture(s, 0, 0, 74 * a, 81 * a), n.scaleX = 1, n.scaleY = 1, n.size(t.rowWidth(), t.rowWidth()), i.default.confirmBS = 1 }) }), y.on(Laya.Event.CLICK, this, function (e) { new s.default("fenbao/shengyin/btn.mp3", !1, 1), null != Laya.stage.getChildByName("bskk") && Laya.stage.removeChildByName("bskk"), t.clearAnimationAll(), t.useBS = !1, i.default.confirmBS = 2 }), d.addChild(g), d.addChild(f), d.addChild(c), d.addChild(p), d.addChild(y), Laya.stage.addChild(d) }, e.prototype.ywAnimation = function (e) { var t = this, a = new Laya.Animation; a.interval = 50, a.play(0, !1, "yw"), a.zOrder = 10, a.on(Laya.Event.COMPLETE, this, function (e) { t.useBS = !1 }); var i = a.getBounds(); a.pos(this.roleBox.x + e.x + (e.width - i.width) / 2 - e.width / 2, this.roleBox.y + e.y + (e.height - i.height) / 2 - 1.5 * e.height), Laya.stage.addChild(a) }, e.prototype.colorIndex = function (e) { for (var t = 0; t < this.IMGARR.length; ++t)if (e == this.IMGARR[t]) return t; return -1 }, e.prototype.flayProp = function (e, t, a) { var n = this, o = 0, r = 0, s = Laya.Browser.window.scX; switch (e) { case "redp": o = 67, r = 56; break; case "greenp": o = 70, r = 54; break; case "bluep": o = 65, r = 58; break; case "gayp": o = 59, r = 56; break; case "yellowp": o = 50, r = 54 }var h = this.getPos(t.index), d = this.getImage("zhuye/" + e + ".png", o * s, r * s, this.roleBox.x + t.x, this.roleBox.y + t.y - t.height / 2 + r * s / 2); d.pivot(d.width / 2, d.height / 2), d.alpha = 0; var l = new Laya.TimeLine; l.to(d, { y: d.y - 20, alpha: 1 }, 500, Laya.Ease.linearInOut, 0); var u = 0; h.x < 4 ? u = Math.abs(4 - h.x) : h.x > 5 && (u = h.x - 5); var g = 0, f = 0, c = this.main.centerBox, p = 0, y = 290 * s, w = -200 * s; if (a < 4) { var m = c.getChildAt(0); y = 290 * s, w = -200 * s } else if (a >= 4 && a < 6) { var m = c.getChildAt(1); p = 1, y = 150 * s, w = -200 * s } else if (a >= 6 && a < 8) { var m = c.getChildAt(3); p = 3, y = -150 * s, w = -200 * s } else if (a >= 8 && a < 10) { var m = c.getChildAt(4); p = 4, y = -290 * s, w = -200 * s } else { var m = c.getChildAt(2); p = 2, y = 10 * s, w = -190 * s } var L = m.getChildByName("gone"); L.sh, L.zdNum; g = c.x + 47.5 * s + m.x + (m.width - o) / 2, f = c.y + m.height / 3; var v = m.getChildByName("zdTxt"); l.to(d, { x: g, y: f, rotation: 2e3 }, 200 + 50 * h.y + 30 * u, Laya.Ease.linearInOut, 0); var x = a; l.on(Laya.Event.COMPLETE, this, function (e) { v.zidan += 1, v.sjzd += 1, L.scaleX = 1, L.scaleY = 1, v.zidan >= i.default.gone[p].zdNum && (v.zidan = i.default.gone[p].zdNum), v.text = v.zidan + "/" + i.default.gone[p].zdNum, setTimeout(function () { L.scaleX = .8, L.scaleY = .8 }, 100), setTimeout(function () { n.goPlayRole(m, y, w, p, x) }, 200), d.removeSelf() }), l.play(0, !1), Laya.stage.addChild(d) }, e.prototype.goPlayRole = function (e, t, a, n, o) { var r = this; this.main.bloodImg(); var d = Laya.Browser.window.scX, l = this.getImage("xinzhuye/zd.png", 0, 0, 0, 0); l.width = l.getBounds().width * d, l.height = l.getBounds().height * d; var u = e.getChildByName("gone"), g = e.getChildByName("zdTxt"); 0 == n || 1 == n ? l.pos(u.width - l.width / 2, -l.height / 2) : 3 == n || 4 == n ? l.pos(-l.width / 2, -l.height / 2) : l.pos((u.width - l.width) / 2, -l.height / 2); var f = new Laya.TimeLine; f.to(l, { y: a, x: t }, 100, Laya.Ease.linearInOut, 0); var c = o; c < 4 ? new s.default("fenbao/shengyin/shouqiang.mp3", !1, 1) : c >= 4 && c < 6 ? new s.default("fenbao/shengyin/chongfengqiang.mp3", !1, 1) : c >= 6 && c < 8 ? new s.default("fenbao/shengyin/buqiang.mp3", !1, 1) : c >= 8 && c < 10 ? new s.default("fenbao/shengyin/jujiqiang.mp3", !1, 1) : new s.default("fenbao/shengyin/daboluo.mp3", !1, 1); var p = this; f.on(Laya.Event.COMPLETE, this, function (e) { new s.default("fenbao/shengyin/aida.mp3", !1, 1), g.zidan -= 1, g.sjzd -= 1, g.sjzd <= g.zidan && (g.zidan -= 1), g.zidan < 0 && (g.zidan = 0), g.sjzd < 0 && (g.sjzd = 0), g.text = g.zidan + "/" + i.default.gone[n].zdNum, l.removeSelf(), Laya.Browser.onMiniGame && Laya.Browser.window.wx.vibrateShort({ success: function (e) { } }), p.main.prosBox.scaleX += .1, p.main.prosBox.scaleY += .1, p.main.role.scaleY = .7, setTimeout(function () { p.main.prosBox.scaleX -= .1, p.main.prosBox.scaleY -= .1, p.main.role.scaleY = 1 }, 100); var t = new Laya.Text; t.text = "-" + new h.default(u.sh).formatPointNumber(), t.color = "#e81313", t.fontSize = 80, t.bolb = !0, t.pos((178 * d - t.width) / 2, (239 * d - t.height) / 2.5), Laya.Tween.to(t, { y: t.y - 50 * d, alpha: .1, update: Laya.Handler.create(r, function (e) { }) }, 500, Laya.Ease.circInOut, Laya.Handler.create(r, function (e) { t.removeSelf() }), 200), t.zOrder = 1, r.main.role.addChild(t), r.playSp((178 * d - 159 * d) / 2 + 178 * d / 2, (239 * d - 159 * d) / 2.3), i.default.userNowHp -= u.sh, i.default.nowLevel > i.default.passLevel && !i.default.passOk && (i.default.passOk = !0, r.conPass(), i.default.passLevel++), i.default.userNowHp <= 0 && (i.default.userNowHp = 0, i.default.nowLevel++ , r.main.setRoleImg(i.default.nowLevel), r.main.leftTopImg(parseInt(i.default.nowLevel) + 1), i.default.passOk || (r.conPass(), i.default.passLevel++), i.default.passOk = !0, r.main.setLevel(i.default.nowLevel), i.default.nowLevel > 4 ? (i.default.userHp = i.default.bossHpArr[i.default.bossHpArr.length - 1] + 100 * (i.default.nowLevel - 1), i.default.userNowHp = i.default.bossHpArr[i.default.bossHpArr.length - 1] + 100 * (i.default.nowLevel - 1)) : (i.default.userHp = i.default.bossHpArr[i.default.nowLevel], i.default.userNowHp = i.default.bossHpArr[i.default.nowLevel])), r.main.setProsPos() }), f.play(0, !1), u.addChild(l) }, e.prototype.playSp = function (e, t) { var a = Laya.Browser.window.scX, i = this.getImage("zhuye/bolb.png", 159 * a, 159 * a, e, t); i.pivot(i.width / 2, i.height / 2), setTimeout(function () { i.removeSelf() }, 300), this.main.role.addChild(i) }, e.prototype.usePercussion = function (e) { if (this.clearAnimationAll(), this.doubleIndex == e) return new s.default("fenbao/shengyin/zhadan.mp3", !1, 1), this.commStar = [], this.commStar.push(e), this.clearStar([e], e, !0), null != Laya.stage.getChildByName("percussion") && Laya.stage.removeChildByName("percussion"), this.useCZ = !1, this.useCZOk = !0, void (this.doubleIndex = -1); this.doubleIndex = e; Laya.Browser.window.scX; null != Laya.stage.getChildByName("percussion") && Laya.stage.removeChildByName("percussion"); for (var t, a = 0; a < this.roleBox._children.length; ++a)Laya.Tween.clearTween(this.roleBox._children[a]), this.roleBox._children[a].index == e && (t = this.roleBox._children[a]); if (void 0 == t || null == t) { var i = this.randomNum(0, this.roleBox._children.length - 1); t = this.roleBox.getChildAt(i), this.doubleIndex = t.index, e = t.index } this.scaleAnimation(t); var n = (this.getPos(e), new Laya.Animation); n.name = "percussion", n.interval = 200, n.on(Laya.Event.COMPLETE, this, function () { }), n.play(0, !0, "percussion"); var o = n.getBounds(); n.pos(this.roleBox.x + t.x + (t.width - o.width) / 2 - t.width / 2, this.roleBox.y + t.y + (t.height - o.height) / 2 - 1.25 * t.height), Laya.stage.addChild(n) }, e.prototype.noClear = function () { for (var e = [], t = 0, a = 0; a < this.row; ++a)for (var i = 0; i < this.clos; ++i)0 != this.starArr[a][i] && (a - 1 > 0 && a + 1 < this.row && i - 1 > 0 && i < this.clos ? this.starArr[a][i] != this.starArr[a + 1][i] && 0 != this.starArr[a + 1][i] && this.starArr[a][i] != this.starArr[a][i + 1] && 0 != this.starArr[a][i + 1] && this.starArr[a][i] != this.starArr[a][i - 1] && 0 != this.starArr[a][i - 1] && this.starArr[a][i] != this.starArr[a - 1][i] && 0 != this.starArr[a - 1][i] && e.push(t) : 0 == a && 0 == i ? this.starArr[a][i] != this.starArr[a + 1][i] && 0 != this.starArr[a + 1][i] && this.starArr[a][i] != this.starArr[a][i + 1] && 0 != this.starArr[a][i + 1] && e.push(t) : 0 == a && i == this.clos - 1 ? this.starArr[a][i] != this.starArr[a + 1][i] && 0 != this.starArr[a + 1][i] && this.starArr[a][i] != this.starArr[a][i - 1] && 0 != this.starArr[a][i - 1] && e.push(t) : a == this.row - 1 && 0 == i ? this.starArr[a][i] != this.starArr[a - 1][i] && 0 != this.starArr[a - 1][i] && this.starArr[a][i] != this.starArr[a][i + 1] && 0 != this.starArr[a][i + 1] && e.push(t) : a == this.row - 1 && i == this.clos - 1 ? this.starArr[a][i] != this.starArr[a - 1][i] && 0 != this.starArr[a - 1][i] && this.starArr[a][i] != this.starArr[a][i - 1] && 0 != this.starArr[a][i - 1] && e.push(t) : a + 1 >= this.row ? this.starArr[a][i] != this.starArr[a - 1][i] && 0 != this.starArr[a - 1][i] && this.starArr[a][i] != this.starArr[a][i + 1] && 0 != this.starArr[a][i + 1] && this.starArr[a][i] != this.starArr[a][i - 1] && 0 != this.starArr[a][i - 1] && e.push(t) : a - 1 <= 0 ? this.starArr[a][i] != this.starArr[a + 1][i] && 0 != this.starArr[a + 1][i] && this.starArr[a][i] != this.starArr[a][i + 1] && 0 != this.starArr[a][i + 1] && this.starArr[a][i] != this.starArr[a][i - 1] && 0 != this.starArr[a][i - 1] && e.push(t) : i + 1 >= this.clos ? this.starArr[a][i] != this.starArr[a - 1][i] && 0 != this.starArr[a - 1][i] && this.starArr[a][i] != this.starArr[a][i - 1] && 0 != this.starArr[a][i - 1] && this.starArr[a][i] != this.starArr[a + 1][i] && 0 != this.starArr[a + 1][i] && e.push(t) : i - 1 <= 0 && this.starArr[a][i] != this.starArr[a - 1][i] && 0 != this.starArr[a - 1][i] && this.starArr[a][i] != this.starArr[a][i + 1] && 0 != this.starArr[a][i + 1] && this.starArr[a][i] != this.starArr[a + 1][i] && 0 != this.starArr[a + 1][i] && e.push(t)), t++; return e }, e.prototype.saveUserInfo = function () { var e = this.flatten(this.starArr), t = {}; t.value = e, t.prop = i.default.prop, t.maxResult = i.default.passLevel, t.result = i.default.userHp, t.surplusResult = i.default.userNowHp, t.checkpoint = i.default.nowLevel, t.showTxt = this.showTxt, i.default.saveLevelInfo = {}, i.default.saveLevelInfo.value = e, i.default.saveLevelInfo.checkpoint = i.default.nowLevel, i.default.saveLevelInfo.result = i.default.userHp, i.default.saveLevelInfo.surplusResult = i.default.userNowHp, i.default.saveLevelInfo.maxResult = i.default.passLevel, i.default.saveLevelInfo.prop = i.default.prop, i.default.saveLevelInfo.showTxt = this.showTxt, new o.default("/EatChicken/user/keepGame.action?value=" + encodeURI(JSON.stringify(t)), "get", {}, i.default.cookie, function (e) { }) }, e.prototype.conPass = function () { var e = this; this.main.setPassOk(!0); var t = new n.default; if (t.pass(function (a) { 1 == a && (t.getGiftCode("gcz", 1, e.main), t.getGiftCode("greset", 1, e.main), t.getGiftCode("glx", 1, e.main), t.getGiftCode("gsz", 1, e.main)) }), Laya.stage.addChild(t), Laya.Browser.onMiniGame) { Laya.Browser.window.wx.getOpenDataContext().postMessage({ action: "set", score: i.default.nowLevel }) } new o.default("/EatChicken/user/gameOver.action?maxResult=" + (i.default.userHp - i.default.userNowHp) + "&checkpoint=" + i.default.nowLevel, "get", {}, i.default.cookie, function (e) { }) }, e.prototype.sendParticle = function (e, t, a, i, n, o, r) { void 0 === r && (r = null); var h = this.prBox.getChildAt(n), d = e, l = t, u = a - d, g = l - i; h.pos(e, t), h.rotation = this.countAngle([u, g]), h.visible = !0; var f = new Laya.TimeLine; f.to(h, { x: a, y: i }, 500, Laya.Ease.linearInOut, 0), f.on(Laya.Event.COMPLETE, this, function (e) { h.visible = !1, null != r && r() }), f.play(0, !1), new s.default("fenbao/shengyin/qiu.mp3", !1, 1) }, e.prototype.addParBox = function () {
      this.prBox = new Laya.Sprite; for (var e = 0; e < 5; ++e) {
        var t = Laya.Browser.window.scX, a = new Laya.Sprite, i = new Laya.Sprite; i.width = 39 * t, i.height = 40 * t, i.graphics.drawTexture(Laya.loader.getRes("zhuye/starfg.png"), 0, 0, 39 * t, 40 * t), i.pivot(i.width / 2, i.height / 2), i.pos(i.width / 2, i.height / 2); var n = new Laya.TimeLine; n.to(i, { rotation: 3600 }, 1e4, Laya.Ease.linearInOut, 0), n.play(0, !0); var o = (new Laya.Sprite, new Laya.ParticleSetting), r = new Laya.Particle2D(o)
          ; r.pos(i.width / 4, i.height / 4), r.url = "starPr.part", r.play(), r.pos(i.width, i.height / 2), r.emitter.emit(); var s = new Laya.Particle2D(o); s.pos(i.width / 4, i.height / 4), s.url = "starPr.part", s.play(), s.pos(i.width, i.height / 2), s.emitter.emit(); var h = new Laya.Particle2D(o); h.pos(i.width / 4, i.height / 4), h.url = "starPr.part", h.play(), h.pos(i.width, i.height / 2), h.emitter.emit(), a.addChild(i), a.addChild(r), a.addChild(s), a.addChild(h), a.width = 40 * t, a.height = 40 * t, a.pivot(a.width / 2, a.height / 2), a.pos(0, 0), a.visible = !1, this.prBox.addChild(a)
      } this.prBox.zOrder = 5, Laya.stage.addChild(this.prBox)
      }, e.prototype.countAngle = function (e) { var t = e[0], a = e[1]; return 360 * Math.atan(t / a) / (2 * Math.PI) }, e.prototype.accountGame = function (e) { var t = this; void 0 === e && (e = !0), this.account = !0, this.aliveOk = e, this.clearAnimationAll(), e || (i.default.gameOver = !0); for (var a = [], n = 0; n < this.row; ++n)for (var o = 0; o < this.row; ++o)void 0 != this.starArr[o][n] && 0 != this.starArr[o][n] && a.push(this.starIndexArr[o][n]); this.endLen = a.length; var r = 0; if (0 == this.endLen) return void this.setAccountData(this.aliveOk, 0); for (var n = 0; n < this.roleBox._children.length; ++n) { var s = new Laya.TimeLine; s.to(this.roleBox._children[n], { alpha: .1 }, 500, Laya.Ease.linearInOut, 0), s.to(this.roleBox._children[n], { alpha: 1 }, 500, Laya.Ease.linearInOut, 0), s.to(this.roleBox._children[n], { alpha: .1 }, 500, Laya.Ease.linearInOut, 0), s.to(this.roleBox._children[n], { alpha: 1 }, 500, Laya.Ease.linearInOut, 0), s.on(Laya.Event.COMPLETE, this, function (e) { if (++r == t.roleBox._children.length) for (var i = 0; i < a.length; ++i)!function (e) { for (var i = 0; i < t.roleBox._children.length; ++i)a[e] != t.roleBox._children[i].index || (t.accountScore -= 200, t.accountScore <= 0 && (t.accountScore = 0), e < 10 ? function (i) { setTimeout(function () { t.clearStar([a[e]], a[e], !0) }, 300 * e) }(t.accountScore) : function (i) { setTimeout(function () { t.clearStar([a[e]], a[e], !0) }, 3e3) }(t.accountScore)) }(i) }), s.play(0, !1) } }, e.prototype.addTxtTip = function (e, t) { if (void 0 === t && (t = !1), t) if (null != Laya.stage.getChildByName("tipNum1")) { var a = Laya.stage.getChildByName("tipNum1"); a.text = "" + e } else { var a = new Laya.Text; a.text = "" + e, a.name = "tipNum1", a.fontSize = 32 * Laya.Browser.window.scX, a.pos((Laya.stage.width - a.width) / 2, (Laya.stage.height - a.height) / 2), a.zOrder = 1, Laya.stage.addChild(a) } else { var i = new Laya.Text; i.text = "" + e, i.name = "tipNum", i.fontSize = 32 * Laya.Browser.window.scX, i.pos(-i.width, (Laya.stage.height - i.height) / 2), i.zOrder = 1; var n = new Laya.TimeLine; n.to(i, { x: (Laya.stage.width - i.width) / 2, alpha: 1 }, 300, Laya.Ease.linearInOut, 0), n.to(i, {}, 1500, 0), n.to(i, { x: Laya.stage.width + i.width, alpha: 0 }, 300, Laya.Ease.linearInOut, 0), n.on(Laya.Event.COMPLETE, this, function (e) { i.removeSelf() }), n.play(0, !1), Laya.stage.addChild(i) } }, e
    }(); a.default = d
  }, { "../common/AllTip": 3, "../common/FormatNumber": 5, "../common/SoundManager": 6, "../config/config": 9, "../popup/PopupManager": 17, "../request/GetData": 18 }], 14: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = e("./GameCode"), n = e("../config/config"), o = e("../common/AllTip"), r = e("../popup/PopupManager"), s = e("../request/GetData"), h = e("../common/SoundManager"), d = e("../common/FormatNumber"), l = function (e) { function t() { var t = e.call(this) || this; return t.longDown = !1, t } return __extends(t, e), t.prototype.onEnable = function () { this.scene = this.owner, this.scene.width = Laya.stage.width, this.scene.height = Laya.stage.height, console.log("进入主场景"); var e = this.scene.getChildByName("mainBg"); e.width = Laya.stage.width, e.height = Laya.stage.height; var t = Laya.Browser.window.scX; this.leftTop = this.getImage("xinzhuye/topBox.png", 230 * t, 131 * t, 10 * t, 10 * t), this.leftTop.addChild(this.leftTopImg(n.default.nowLevel + 1)); var a = this.getImage("xinzhuye/cy.png", 93 * t, 23 * t, (this.leftTop.width - 93 * t) / 2, 5 * t); this.leftTop.addChild(a), this.scene.addChild(this.leftTop); var o = new Laya.Sprite; o.pos(Laya.stage.width - 226 * t, 200 * Laya.Browser.window.scY); var r = this.getImage("xinzhuye/zsBg.png", 211 * t, 60 * t, 0, 0); this.zsNum = new Laya.Text, this.zsNum.text = "" + new d.default(n.default.zsNum).formatPointNumber(), this.zsNum.width = r.width - 60 * t, this.zsNum.fontSize = 32 * t, this.zsNum.color = "#fff", this.zsNum.stroke = 2, this.zsNum.strokeColor = "#000", this.zsNum.align = "center", this.zsNum.pos(25 * t + (r.width - this.zsNum.width) / 2, (r.height - this.zsNum.height) / 2), r.addChild(this.zsNum), r.on(Laya.Event.CLICK, this, this.getDiamonds); var s = this.getImage("xinzhuye/goHome.png", 197 * t, 88 * t, r.width - 197 * t, r.y + r.height + 20 * t); s.on(Laya.Event.CLICK, this, this.goHome), o.addChild(r), o.addChild(s), this.scene.addChild(o), this.roleBox = new Laya.Sprite, this.roleBox.width = 480 * t, this.roleBox.height = 269 * t, this.roleBox.pos((this.scene.width - 480 * t) / 2, Laya.stage.height - 1150 * t), this.role = this.getImage("xinzhuye/role" + n.default.nowLevel % 3 + ".png", 178 * t, 239 * t, (this.roleBox.width - 178 * t) / 2, 0), this.role.pivot(this.role.width / 2, this.role.height), this.role.pos((this.roleBox.width - 178 * t) / 2 + this.role.width / 2, this.role.height), this.role.roleFrame = 0, this.role.zOrder = 3, this.roleBox.addChild(this.role), this.prosBox = this.getImage("xinzhuye/hpBg.png", 238 * t, 41 * t, (this.roleBox.width - 238 * t) / 2 + 75 * t / 2, -41 * t), this.prosBox.pivot(this.prosBox.width / 2, this.prosBox.height / 2), this.prosBox.pos(this.roleBox.width / 2, -41 * t / 1.1); var h = this.getImage("xinzhuye/hp.png", 63 * t, 63 * t, this.prosBox.x - this.prosBox.width - this.prosBox.width / 4 + 63 * t / 2, (this.prosBox.height - 63 * t) / 2); h.zOrder = 2; var l = new Laya.Sprite, u = this.getImage("xinzhuye/hpOpacity.png", 220 * t, 22 * t, 5 * t, (41 * t - 22 * t) / 2); this.sa = this.getImage("xinzhuye/hpActive.png", 220 * t, 22 * t, 5 * t, (41 * t - 22 * t) / 2), n.default.useUpLevel || (n.default.nowLevel > 4 ? (n.default.userHp = n.default.bossHpArr[n.default.bossHpArr.length - 1] + 100 * (n.default.nowLevel - 1), n.default.userNowHp = n.default.bossHpArr[n.default.bossHpArr.length - 1] + 100 * (n.default.nowLevel - 1)) : (n.default.userHp = n.default.bossHpArr[n.default.nowLevel], n.default.userNowHp = n.default.bossHpArr[n.default.nowLevel])), this.sa.x = -(1 - n.default.userNowHp / n.default.userHp) * this.sa.width + 21 * t / 2, l.pos(0, 0), l.addChild(u), l.addChild(this.sa), l.mask = u, this.tipText = new Laya.Text, this.tipText.text = n.default.userNowHp + "/" + n.default.userHp, this.tipText.fontSize = 28 * t, this.tipText.color = "#fff", this.tipText.align = "center", this.tipText.stroke = 2, this.tipText.strokeColor = "#000", this.tipText.width = this.prosBox.width, this.tipText.pos(0, -this.tipText.height / 4), this.prosBox.addChild(h), this.prosBox.addChild(l), this.prosBox.addChild(this.tipText), this.prosBox.zOrder = 6, this.roleBox.addChild(this.prosBox), this.roleBox.zOrder = 2, this.scene.addChild(this.roleBox), this.centerBox = this.getImage("xinzhuye/center.png", 750 * t, 190 * t, 0, Laya.stage.height - 940 * t), this.centerBox.zOrder = 4, this.scene.addChild(this.centerBox), this.btnGroup = this.getImage("xinzhuye/btmk.png", 750 * t, 107 * t, 0, Laya.stage.height - 107 * t), this.addFourProp(), this.scene.addChild(this.btnGroup), this.addLeftGole(), -1 != n.default.nickName.indexOf("rdgztest") || -1 != n.default.nickName.indexOf("minigame") || -1 != n.default.nickName.indexOf("Lu。") || -1 != n.default.nickName.indexOf("水星") || -1 != n.default.nickName.indexOf("Fs") || -1 != n.default.nickName.indexOf("子昂2019") || -1 != n.default.nickName.indexOf("唐若") || -1 != n.default.nickName.indexOf("雨墨") ? (this.leftTop.visible = !1, this.roleBox.visible = !1, o.visible = !1, this.prosBox.visible = !1, this.nowGold = new Laya.Text, n.default.testHp = 1e4, this.nowGold.text = "本局目标：" + new d.default(n.default.testHp).formatPointNumber(), this.nowGold.width = Laya.stage.width, this.nowGold.fontSize = 50 * t, this.nowGold.color = "#fff", this.nowGold.stroke = 2, this.nowGold.strokeColor = "#000", this.nowGold.align = "center", this.nowGold.pos(0, Laya.stage.height - 1150 * t), Laya.stage.addChild(this.nowGold), this.leftBg.visible = !1, this.centerBox.visible = !1, this.gameCode = new i.default(Laya.stage.height - 1e3 * t, this.role, this)) : this.gameCode = new i.default(Laya.stage.height - 770 * t, this.role, this), this.setArms() }, t.prototype.setArms = function () { for (var e = this, t = Laya.Browser.window.scX, a = 655 * t / 5, i = this, l = 0; l < 5; ++l)!function (l) { var u = new Laya.Sprite; u.width = a, u.height = 190 * t, u.index = l; var g = i.getImage("xinzhuye/" + n.default.gone[l].name + n.default.gone[l].weapon.grade + ".png", 0, 0, 0, 0); g.width = g.getBounds().width * t, g.height = g.getBounds().height * t, g.pivot(g.width / 2, g.height / 2), g.pos(u.width / 2, u.height / 3), g.name = "gone", g.scaleX = .8, g.scaleY = .8, g.sh = n.default.gone[l].weapon.attack, g.zdNum = n.default.gone[l].zdNum; var f = new Laya.Text; f.text = "0/" + n.default.gone[l].zdNum, f.color = "#fff", f.width = u.width, f.align = "center", f.stroke = 2, f.zidan = 0, f.sjzd = 0, f.strokeColor = "#000", f.name = "zdTxt", f.fontSize = 24, f.pos(0, (u.height - f.height) / 2); var c = i.getImage("xinzhuye/upbtn.png", 110 * t, 49 * t, (u.width - 110 * t) / 2, u.height - 49 * t * 1.5); c.name = "upBtn"; var p = new Laya.Text; p.text = "" + new d.default(n.default.gone[l].weapon.money).formatThreeNumber(), p.color = "#fff", p.width = 40 * t, p.align = "center", p.fontSize = 20, p.pos((c.width - 40 * t) / 2, (c.height - p.height) / 2), c.addChild(p), c.on(Laya.Event.CLICK, i, function (t) { if (!e.gameCode.account) { new h.default("fenbao/shengyin/btn.mp3", !1, 1); var a = t.target, i = a.parent, u = a.getChildAt(0); if (n.default.zsNum < n.default.gone[i.index].weapon.money) { new o.default("钻石不足"); var g = new r.default; return Laya.stage.addChild(g), void g.noZs(500, function (t) { n.default.zsNum += t, e.zsNum.text = "" + new d.default(n.default.zsNum).formatPointNumber() }) } if (n.default.gone[i.index].weapon.grade += 1, n.default.gone[i.index].weapon.grade > 5) return n.default.gone[i.index].weapon.grade = 5, void new o.default("已达到满级"); var f = ""; f = "sgone" == n.default.gone[l].name ? "one" : "cgone" == n.default.gone[l].name ? "two" : "bgone" == n.default.gone[l].name ? "three" : "jgone" == n.default.gone[l].name ? "four" : "five"; for (var c = null, p = 0; p < n.default.wqPZ.length; ++p)if (f == n.default.wqPZ[p].type && n.default.gone[i.index].weapon.grade == n.default.wqPZ[p].grade) { c = n.default.wqPZ[p]; break } n.default.zsNum -= n.default.gone[i.index].weapon.money, e.zsNum.text = "" + new d.default(n.default.zsNum).formatPointNumber(), n.default.gone[i.index].weapon = c, u.text = "" + new d.default(n.default.gone[i.index].weapon.money).formatThreeNumber(); var y = i.getChildByName("gone"); y.graphics.clear(); var w = Laya.loader.getRes("xinzhuye/" + n.default.gone[i.index].name + n.default.gone[i.index].weapon.grade + ".png"); y.graphics.drawTexture(w), y.size(w.width, w.height), y.sh = n.default.gone[i.index].weapon.attack, y.scaleX = .8, y.scaleY = .8, new s.default("/EatChicken/user/updateWeapon.action?weaponId=" + n.default.gone[i.index].id, "get", {}, n.default.cookie, function (e) { new o.default("升级成功!"), new h.default("fenbao/shengyin/shengli.mp3", !1, 1) }) } }), u.addChild(g), u.addChild(f), u.addChild(c), u.pos(47.5 * t + a * l, 0), i.centerBox.addChild(u) }(l) }, t.prototype.bloodImg = function () { var e = Laya.Browser.window.scX; if (null == this.role.getChildByName("bloodBox")) { var t = new Laya.Sprite; t.name = "bloodBox"; var a = this.getImage("xinzhuye/xue.png", 136 * e, 153 * e, this.role.width, this.role.height / 2), i = this.getImage("xinzhuye/xue.png", 136 * e, 153 * e, 0, 0), n = this.getImage("xinzhuye/xue.png", 136 * e, 153 * e, -this.role.width, -this.role.height / 2), o = this.getImage("xinzhuye/xue.png", 136 * e, 153 * e, -this.role.width / 2, this.role.height / 2), r = this.getImage("xinzhuye/xue.png", 136 * e, 153 * e, this.role.width, -this.role.height); t.addChild(a), t.addChild(i), t.addChild(n), t.addChild(o), t.addChild(r); var s = new Laya.TimeLine; s.to(t, { alpha: 0 }, 1e3, Laya.Ease.linearInOut, 500), s.on(Laya.Event.COMPLETE, this, function (e) { t.removeSelf() }), s.play(0, !1), this.role.addChild(t) } }, t.prototype.setRoleImg = function (e) { this.role.graphics.clear(); var t = Laya.loader.getRes("xinzhuye/role" + e % 3 + ".png"); this.role.graphics.drawTexture(t, 0, 0, 178 * Laya.Browser.window.scX, 239 * Laya.Browser.window.scX), this.role.size(t.width, t.height) }, t.prototype.addLeftGole = function () { var e = Laya.Browser.window.scX; this.leftBg = this.getImage("xinzhuye/cir1.png", 215 * e, 227 * e, 15 * e, 150 * e); var t = new Laya.Text; t.text = "本局目标关卡：", t.color = "#ffc808", t.width = this.leftBg.width, t.align = "center", t.pos(0, 25 * e), t.fontSize = 24; var a = new Laya.Text; a.text = "需要完成第" + (n.default.passLevel + 1) + "关", a.color = "#fff", a.width = this.leftBg.width, a.align = "center", a.stroke = 2, a.strokeColor = "#000", a.name = "endLevel", a.fontSize = 24, a.pos(0, t.y + t.height + 15 * e); var i = new Laya.Text; i.text = "恭喜本局目标已达成", i.color = "#ff083c", i.width = this.leftBg.width, i.align = "center", i.name = "passTxt", i.visible = !1, i.fontSize = 22, i.pos(0, a.y + a.height + 25 * e); var o = new Laya.Text; o.text = "本局目标关卡：", o.color = "#ffc808", o.width = this.leftBg.width, o.align = "center", o.fontSize = 24, o.pos(0, i.y + i.height + 20 * e); var r = new Laya.Text; r.text = "正在进行第" + (n.default.nowLevel + 1) + "关", r.color = "#fff", r.width = this.leftBg.width, r.align = "center", r.stroke = 2, r.strokeColor = "#000", r.name = "nowLevel", r.fontSize = 24, r.pos(0, o.y + o.height + 10 * e), this.leftBg.addChild(t), this.leftBg.addChild(a), this.leftBg.addChild(o), this.leftBg.addChild(r), this.leftBg.addChild(i), this.scene.addChild(this.leftBg) }, t.prototype.goHome = function () { if (!this.gameCode.account && !this.gameCode.gameEnd) { new h.default("fenbao/shengyin/btn.mp3", !1, 1), null != Laya.stage.getChildByName("pass") && Laya.stage.removeChild(Laya.stage.getChildByName("pass")); var e = new Laya.Scene; e.loadScene("MyScene/Home.scene"), Laya.stage.addChild(e), this.scene.removeSelf() } }, t.prototype.addFourProp = function () { var e = Laya.Browser.window.scX; this.btnGroup.removeChildren(); var t = ["cz", "pen", "resetImg", "bomb"], a = (Laya.stage.width - 163 * e) / 4, i = this.getImage("xinzhuye/ltxt.png", 158 * e, 55 * e, 5 * e, (this.btnGroup.height - 55 * e) / 2); this.btnGroup.addChild(i); for (var o = 0; o < t.length; ++o) { var r = this.getImage("xinzhuye/djbg.png", 124 * e, 82 * e, 163 * e + (a - 124 * e) / 2 + a * o, (this.btnGroup.height - 82 * e) / 2); r.name = "" + t[o], r.nums = n.default.prop[t[o]]; var s = this.getImage("xinzhuye/" + t[o] + ".png", 95 * e, 94 * e, -5 * e, 0), h = new Laya.Sprite; h.name = "oText"; var d = new Laya.Text; d.text = "拥有:" + n.default.prop[t[o]], d.fontSize = 24 * e, d.color = "#ffc808", h.addChild(d), h.width = 116 * e, h.pos(r.width - d.width, r.height - 1.1 * d.height); var l = this.getImage("xinzhuye/No.png", 47 * e, 41 * e, r.width - 47 * e, r.height - 41 * e); l.name = "oHaveImg", l.visible = !1, h.visible = !1, n.default.prop[t[o]] <= 0 ? (l.visible = !0, h.visible = !1) : (l.visible = !1, h.visible = !0), r.addChild(s), r.addChild(h), r.addChild(l), this.btnGroup.addChild(r); var u = new Laya.TimeLine, g = s.y; o % 2 == 0 ? (u.to(s, { y: g + 10 * e }, 3e3, Laya.Ease.linearInOut, 30 * o), u.to(s, { y: g - 10 * e }, 3e3, Laya.Ease.linearInOut, 0), u.to(s, { y: g }, 3e3, Laya.Ease.linearInOut, 0)) : (u.to(s, { y: g - 10 * e }, 3e3, Laya.Ease.linearInOut, 30 * o), u.to(s, { y: g + 10 * e }, 3e3, Laya.Ease.linearInOut, 0), u.to(s, { y: g }, 3e3, Laya.Ease.linearInOut, 0)), u.play(0, !0), r.on(Laya.Event.MOUSE_DOWN, this, this.propDown), r.on(Laya.Event.MOUSE_UP, this, this.propUp), Laya.stage.on(Laya.Event.MOUSE_UP, this, function () { if (this.longDown) { this.longDown = !1; for (var e = ["pen", "cz", "resetImg", "bomb"], t = 0; t < e.length; ++t)null != Laya.stage.getChildByName(e[t] + "Tip") && Laya.stage.removeChild(Laya.stage.getChildByName(e[t] + "Tip")) } }) } }, t.prototype.setProsPos = function (e) { return void 0 === e && (e = !1), e ? (this.sa.x = 0, void (this.tipText.text = n.default.userNowHp + "/" + n.default.userHp)) : this.sa.x <= -this.sa.width ? (this.sa.x = this.sa.width + 21 * Laya.Browser.window.scX / 2, void (this.tipText.text = n.default.userNowHp + "/" + n.default.userHp)) : (this.sa.x = -(1 - n.default.userNowHp / n.default.userHp) * this.sa.width + 21 * Laya.Browser.window.scX / 2, void (this.tipText.text = n.default.userNowHp + "/" + n.default.userHp)) }, t.prototype.downLoop = function (e, t, a) { void 0 === e && (e = ""), void 0 === t && (t = null), void 0 === a && (a = null), this.longDown = !0; var i = Laya.Browser.window.scX; "pen" == e ? this.onLongTip(e, a._x + t.x - 141 * i / 4, a._y + t.y - 96 * i) : "resetImg" == e ? this.onLongTip(e, a._x + t.x + 141 * i / 2, a._y + t.y - 96 * i) : "cz" == e ? this.onLongTip(e, a._x + t.x + 141 * i / 2, a._y + t.y - 96 * i) : this.onLongTip(e, a._x + t.x - 141 * i / 4, a._y + t.y - 96 * i), Laya.timer.clear(this, this.downLoop) }, t.prototype.propDown = function (e) { this.gameCode.account || Laya.timer.loop(500, this, this.downLoop, [e.target.name, e.target, e.target._parent]) }, t.prototype.setLevel = function (e) { this.leftBg.getChildByName("nowLevel").text = "正在进行第" + (e + 1) + "关" }, t.prototype.setNextLevel = function (e) { this.leftBg.getChildByName("endLevel").text = "需要完成第" + (e + 1) + "关" }, t.prototype.setPassOk = function (e) { this.leftBg.getChildByName("passTxt").visible = e }, t.prototype.propUp = function (e) { var t = this; if (new h.default("fenbao/shengyin/btn.mp3", !1, 1), void 0 == this.gameCode.account || !this.gameCode.account) { var a = e.target; if (Laya.timer.clear(this, this.downLoop), this.longDown) return this.longDown = !1, void (null != Laya.stage.getChildByName(a.name + "Tip") && Laya.stage.removeChild(Laya.stage.getChildByName(a.name + "Tip"))); if ((!this.gameCode.useCZ || this.gameCode.useCZOk) && !(this.gameCode.useCZ || this.gameCode.gameEnd || this.gameCode.useBS || this.gameCode.useStar)) if (0 != a.nums) { if ("pen" != a.name) if (a.nums -= 1, n.default.prop[a.name] -= 1, a.nums <= 0) { a.nums = 0, n.default.prop[a.name] = 0; var i = a.getChildByName("oText").getChildAt(1); null != i && (i.text = "拥有:0"); var l = a.getChildByName("oHaveImg"); a.getChildByName("oText").visible = !1, null != l && (l.visible = !0) } else { var i = a.getChildByName("oText").getChildAt(1); null != i && (i.text = "拥有:" + a.nums); var l = a.getChildByName("oHaveImg"); a.getChildByName("oText").visible = !0, null != l && (l.visible = !1) } else Laya.timer.loop(10, this, this.update, [a]); this.usePropEx(a.name) } else if (n.default.zsNum < 100) { new o.default("钻石不足"); var u = new r.default; Laya.stage.addChild(u), u.noZs(500, function (e) { n.default.zsNum += e, t.zsNum.text = "" + new d.default(n.default.zsNum).formatPointNumber() }) } else new s.default("/EatChicken/user/shop.action?type=100", "get", {}, n.default.cookie, function (e) { n.default.zsNum -= 100, t.setZsNum(n.default.zsNum), t.usePropEx(a.name) }) } }, t.prototype.update = function (e) { if (void 0 === e && (e = null), 1 == n.default.confirmBS) { if (n.default.confirmBS = 0, e.nums -= 1, n.default.prop[e.name] -= 1, e.nums <= 0) { e.nums = 0, n.default.prop[e.name] = 0; var t = e.getChildByName("oText").getChildAt(1); null != t && (t.text = "拥有:0"); var a = e.getChildByName("oHaveImg"); e.getChildByName("oText").visible = !1, null != a && (a.visible = !0) } else { var t = e.getChildByName("oText").getChildAt(1); null != t && (t.text = "拥有:" + e.nums); var a = e.getChildByName("oHaveImg"); e.getChildByName("oText").visible = !0, null != a && (a.visible = !1) } Laya.timer.clear(this, this.update) } else 2 == n.default.confirmBS && (n.default.confirmBS = 0, Laya.timer.clear(this, this.update)) }, t.prototype.usePropEx = function (e) { if ("pen" == e) { if (this.gameCode.useCZ || this.gameCode.gameEnd || this.gameCode.useBS || this.gameCode.useStar) return; for (this.gameCode.useBS = !0; ;) { var t = this.gameCode.randomNum(0, 99), a = this.gameCode.roleBox.getChildAt(t); if (null != a && void 0 != a) { this.gameCode.userHammer(a.index); break } } } else if ("resetImg" == e) { if (this.gameCode.useBS || this.gameCode.useCZ || this.gameCode.gameEnd || this.gameCode.useStar) return; var i = new Laya.Sprite; i.graphics.drawRect(0, 0, Laya.stage.width, Laya.stage.height, "#fff"), i.on(Laya.Event.CLICK, this, function (e) { }), this.gameCode.gameEnd = !0, i.zOrder = 99; var n = new Laya.TimeLine; n.to(i, { alpha: 0 }, 500, Laya.Ease.linearInOut, 500), n.play(0, !1), n.on(Laya.Event.COMPLETE, this, function (e) { i.removeSelf() }), Laya.stage.addChild(i), new h.default("fenbao/shengyin/shanguangdan.mp3", !1, 1), this.gameCode.refresh() } else if ("cz" == e) { if (this.gameCode.useBS || this.gameCode.gameEnd || this.gameCode.useCZ || this.gameCode.useStar) return; if (this.gameCode.useCZ && !this.gameCode.useCZOk) return; this.gameCode.useCZ = !0; var o = this.gameCode.noClear(); this.gameCode.usePercussion(o[this.gameCode.randomNum(0, o.length - 1)]) } else { if (console.log("使用流星"), this.gameCode.useBS || this.gameCode.gameEnd || this.gameCode.useCZ || this.gameCode.useStar) return; this.gameCode.useStar = !0, this.gameCode.clearAnimationAll(); var r = this.gameCode.delRandom(5); this.gameCode.clearStar(r, r[0], !1, !0) } }, t.prototype.addDialogue = function (e, t, a) { var i = this; void 0 === a && (a = Laya.Browser.window.scX); var o = this.getImage("xinzhuye/tipBg.png", 308 * a, 103 * a, this.roleBox.x + this.role.x - 308 * a / 1.2, this.roleBox.y + this.roleBox.height - 103 * a * 1.5), r = new Laya.Text; r.text = "" + e, r.fontSize = 28 * a, r.align = "center", r.width = 280 * a, r.font = "blankFont", r.wordWrap = !0, r.pos(10 * a, (100 * a - r.getBounds().height) / 2), o.zOrder = 4, o.addChild(r); var s = new Laya.TimeLine; return s.to(o, {}, 4e3, Laya.Ease.elasticInOut, 0), s.to(o, { alpha: .8 }, 100, Laya.Ease.elasticInOut, 0), s.to(o, { alpha: 1 }, 100, Laya.Ease.elasticInOut, 0), s.to(o, { alpha: .5 }, 100, Laya.Ease.elasticInOut, 0), s.to(o, { alpha: 1 }, 100, Laya.Ease.elasticInOut, 0), s.to(o, { alpha: 0 }, 100, Laya.Ease.elasticInOut, 0), s.to(o, { alpha: 0 }, 100, Laya.Ease.elasticInOut, 0), s.on(Laya.Event.COMPLETE, this, function (e) { o.removeSelf(), i.randomUserText(n.default.userSide[i.gameCode.randomNum(0, n.default.userSide.length - 1)]) }), s.play(0, !1), o }, t.prototype.getDiamonds = function () { var e = this; console.log("获取钻石方法"), new h.default("fenbao/shengyin/btn.mp3", !1, 1); var t = new r.default(function (e) { }); t.zOrder = 10, Laya.stage.addChild(t), t.invGift(function (t) { n.default.zsNum += parseInt(t), e.setZsNum(n.default.zsNum) }) }, t.prototype.setZsNum = function (e) { this.zsNum.text = e.toString() }, t.prototype.leftTopImg = function (e) { var t = Laya.Browser.window.scX; Laya.Browser.window.scY; if (null == this.leftTop.getChildByName("overstep")) { if (Laya.Browser.onMiniGame) { var a = Laya.Browser.window.wx, i = a.getOpenDataContext(); i.postMessage({ action: "clear" }); var n = new Laya.WXOpenDataViewer; return n.name = "overstep", n.width = 220 * t, n.height = 118 * t, n.pos(0, 0), i.postMessage({ action: "overstep", scX: t, score: e }), n } return null } if (Laya.Browser.onMiniGame) { var o = Laya.Browser.window.wx, i = o.getOpenDataContext(), n = new Laya.WXOpenDataViewer; i.postMessage({ action: "overstep", scX: t, score: e }) } }, t.prototype.getImage = function (e, t, a, i, n) { void 0 === i && (i = 0), void 0 === n && (n = 0); var o = new Laya.Sprite; return o.width = t, o.height = a, o.graphics.drawTexture(Laya.loader.getRes("" + e), 0, 0, t, a), o.pos(i, n), o }, t.prototype.randomUserText = function (e) { }, t.prototype.loop = function () { this.randomUserText(n.default.userSide[this.gameCode.randomNum(0, n.default.userSide.length - 1)]) }, t.prototype.onLongTip = function (e, t, a) { var i = Laya.Browser.window.scX, n = this.getImage("xinzhuye/tips.png", 147 * i, 96 * i, t, a); n.name = e + "Tip", n.alpha = 0; var o = new Laya.Text; o.text = "cz" == e ? "炸弹：使用后可以立即获得指定的一个配件！" : "pen" == e ? "烟雾弹:使用后可以改变指定的一个配件颜色！" : "resetImg" == e ? "闪光弹：使用后可以重新排列当前剩余的配件！" : "信号枪：使用后可以立即随机获得五个配件！", o.color = "#fff6cd", o.wordWrap = !0, o.width = n.width, o.align = "center", o.y = 5 * i, o.fontSize = 22 * i, n.addChild(o); new Laya.TimeLine; Laya.Tween.to(n, { alpha: 1 }, 500, Laya.Ease.linearInOut, null), Laya.stage.addChild(n) }, t }(Laya.Script); a.default = l }, { "../common/AllTip": 3, "../common/FormatNumber": 5, "../common/SoundManager": 6, "../config/config": 9, "../popup/PopupManager": 17, "../request/GetData": 18, "./GameCode": 13 }], 15: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = function (e) { function t() { var t = e.call(this) || this; return t.size(640 * Laya.Browser.window.scX, 155 * Laya.Browser.window.scX), t } return __extends(t, e), t }(Laya.Box); a.default = i }, {}], 16: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = function (e) { function t() { var t = e.call(this) || this; return t.size(640 * Laya.Browser.window.scX, 155 * Laya.Browser.window.scX), t } return __extends(t, e), t }(Laya.Box); a.default = i }, {}], 17: [function (e, t, a) {
    Object.defineProperty(a, "__esModule", { value: !0 }); var i = e("./ItemRank"), n = e("./ItemInv"), o = e("../config/config"), r = e("../common/AllTip"), s = e("../request/GetData"), h = e("../share/Share"), d = e("../common/SoundManager"), l = e("../common/BtnAnimation"), u = e("../common/FormatNumber"), g = function (e) {
      function t(t) { void 0 === t && (t = null); var a = e.call(this) || this; return a.width = Laya.stage.width, a.height = Laya.stage.height, a.pivot(a.width / 2, a.height / 2), a.pos(a.width / 2, a.height / 2), a.scaleX = 0, a.scaleY = 0, Laya.Tween.to(a, { scaleX: 1, scaleY: 1, update: Laya.Handler.create(a, function (e) { }) }, 300, Laya.Ease.elasticInOut, Laya.Handler.create(a, function (e) { o.default.openSuccess = !0, null !== t && t() }), 0), a } return __extends(t, e), t.prototype.maxList = function () { var e = this.opacityBg(); this.addChild(e) }, t.prototype.rankBox = function () { var e = this, t = this.opacityBg(), a = Laya.Browser.window.scX; this.rbg = this.getImage("paihangbang/rBg.png", 742 * a, 1277 * a, (t.width - 742 * a) / 2, (t.height - 1200 * a) / 2); var i = this.getImage("paihangbang/friend1.png", 244 * a, 108 * a, 395 * a, 145 * a); i.zOrder = 3, i.select = !1; var n = !1, r = !1; i.on(Laya.Event.CLICK, this, function (t) { if (r && !i.select && (i.select = !0, new d.default("fenbao/shengyin/btn.mp3", !1, 1), !n)) { n = !0, i.graphics.clear(); var o = Laya.loader.getRes("paihangbang/friend.png"); i.graphics.drawTexture(o, 0, 0, 244 * a, 108 * a), i.size(o.width, o.height), h.graphics.clear(); var s = Laya.loader.getRes("paihangbang/world1.png"); h.graphics.drawTexture(s, 0, 0, 244 * a, 108 * a), h.size(s.width, s.height); var l = e.friendRankList(); null != l && e.rbg.addChild(l), n = !1, h.select = !1 } }); var h = this.getImage("paihangbang/world.png", 244 * a, 108 * a, 80 * a, 145 * a); h.zOrder = 3, h.select = !0; h.on(Laya.Event.CLICK, this, function (t) { if (r && !h.select && (h.select = !0, new d.default("fenbao/shengyin/btn.mp3", !1, 1), !n)) { n = !0; var l = Laya.loader.getRes("paihangbang/friend1.png"); i.graphics.drawTexture(l, 0, 0, 244 * a, 108 * a), i.size(l.width, l.height), h.graphics.clear(); var u = Laya.loader.getRes("paihangbang/world.png"); if (h.graphics.drawTexture(u, 0, 0, 244 * a, 108 * a), h.size(u.width, u.height), Laya.Browser.onMiniGame) { Laya.Browser.window.wx.showLoading({ title: "加载中..." }) } var g = e.rbg.getChildByName("layaList"), f = e.rbg.getChildByName("openData"); null != f && (f.visible = !1), null != g ? (g.visible = !0, n = !1, i.select = !1, Laya.Browser.onMiniGame && Laya.Browser.window.wx.hideLoading()) : new s.default("/EatChicken/user/getRanking.action?firstIndex=1&maxresult=100", "get", {}, o.default.cookie, function (t) { n = !1; var a = e.worldList(t.data.addDatas.resultlist, t.data.message); e.rbg.addChild(a), i.select = !1 }) } }); var l = this.getImage("paihangbang/close.png", 47 * a, 39 * a, this.rbg.width - 47 * a - 50 * a, 50 * a); if (l.zOrder = 6, l.on(Laya.Event.CLICK, this, function () { if (r) { var t = e.rbg.getChildByName("layaList"), a = e.rbg.getChildByName("openData"); null != t && e.rbg.removeChildByName("layaList"), null != a && e.rbg.removeChildByName("openData"), new d.default("fenbao/shengyin/btn.mp3", !1, 1), e.hidePopup() } }), this.rbg.addChild(i), this.rbg.addChild(h), this.rbg.addChild(l), Laya.Browser.onMiniGame) { Laya.Browser.window.wx.showLoading({ title: "加载中..." }) } new s.default("/EatChicken/user/getRanking.action?firstIndex=1&maxresult=100", "get", {}, o.default.cookie, function (t) { n = !1, r = !0; var a = e.worldList(t.data.addDatas.resultlist, t.data.message); e.rbg.addChild(a) }), t.addChild(this.rbg), this.addChild(t) }, t.prototype.randomNum = function (e, t) { return Math.floor(Math.random() * (t - e + 1) + e) }, t.prototype.hidePopup = function () { var e = this, t = new Laya.TimeLine; t.to(this, { scaleX: 0, scaleY: 0 }, 500, Laya.Ease.elasticInOut, 0), t.on(Laya.Event.COMPLETE, this, function (t) { e.removeSelf() }), t.play(0, !1) }, t.prototype.worldList = function (e, t) { var a = this, n = this.rbg.getChildByName("layaList"), o = this.rbg.getChildByName("openData"); if (null != o && (o.visible = !1), null != n) return n.visible = !0, Laya.Browser.onMiniGame && Laya.Browser.window.wx.hideLoading(), null; var r = new Laya.Sprite; r.name = "layaList"; var s = new Laya.List, h = Laya.Browser.window.scX; Laya.Browser.window.scY; s.itemRender = i.default, s.repeatX = 1, s.repeatY = 5, s.x = 0, s.y = 0, s.vScrollBarSkin = "", s.selectEnable = !0; for (var d = [], l = 0; l < e.length - 1; ++l) { var u = new Laya.Sprite; u.width = 640 * h, u.height = 158 * h, u.pos(0, 5 * l), u.graphics.drawTexture(Laya.loader.getRes("paihangbang/right.png"), 0, 0, 640 * h, 158 * h); var g = new Laya.Sprite; g.width = 84 * h, g.height = 87 * h, g.graphics.drawTexture(Laya.loader.getRes("paihangbang/rlbg.png"), 0, 0, 84 * h, 87 * h); var f; f = new Laya.Text, f.text = "" + (l + 1), f.color = "#fff", f.fontSize = 28 * h, f.width = g.width / 1.2, f.align = "center", f.pos(0, (g.height - f.height) / 1.5), g.pos(20 * h, (u.height - g.height) / 2), g.addChild(f), u.addChild(g); var c = new Laya.Sprite, p = new Laya.Sprite; p.width = 89 * h, p.height = 89 * h, p.graphics.drawTexture(Laya.loader.getRes("paihangbang/cir.png"), 0, 0, 89 * h, 89 * h); var y = new Laya.Sprite; y.width = 89 * h, y.height = 89 * h, y.loadImage("" + e[l].headUrl), c.pos(g.x + g.width + 10 * h, (u.height - p.height) / 2), c.addChild(p), c.addChild(y), c.mask = p, u.addChild(c); var w = new Laya.Sprite; w.width = 389 * h, w.height = 94 * h, w.graphics.drawTexture(Laya.loader.getRes("paihangbang/list1.png"), 0, 0, 389 * h, 94 * h), w.pos(c.x + y.width + 10 * h, (u.height - w.height) / 2); var m = new Laya.Text, L = e[l].nickName.toString().length > 6 ? e[l].nickName.substring(0, 6) + "..." : e[l].nickName; m.text = "" + L, m.color = "#fff", m.fontSize = 26 * h, m.bold = !0, m.pos(15 * h, (w.height - m.height) / 2), w.addChild(m); var v = new Laya.Text; v.text = e[l].checkpoint + "关", v.align = "right", v.color = "#fff99a", v.fontSize = 30 * h, v.pos(389 * h - v.width - 15 * h, (w.height - v.getBounds().height) / 2), w.addChild(v), u.addChild(w), d.push(u) } s.array = d, r.pos((this.rbg.width - 640 * h) / 2, 265 * h); var x = new Laya.Sprite; x.width = 620 * h, x.height = 98 * h, x.pos((640 * h - 620 * h) / 2, 780 * h), x.graphics.drawTexture(Laya.loader.getRes("paihangbang/my.png"), 0, 0, 620 * h, 98 * h); var C = new Laya.Text; C.text = "你的排名", C.color = "#482b1c", C.fontSize = 30 * h, C.pos(40 * h, (x.height - C.height) / 2), x.addChild(C); var B = new Laya.Text; B.text = t + "名", B.align = "right", B.color = "#fff", B.stroke = 1, B.strokeColor = "#21201f", B.fontSize = 30 * h, B.pos(x.width - B.width - 40 * h, (x.height - B.height) / 2), x.addChild(B); var I = new Laya.Sprite; I.width = 125 * h, I.height = 37 * h, I.pos((640 * h - I.width) / 2, x.y + x.height + 8 * h), I.graphics.drawTexture(Laya.loader.getRes("paihangbang/xt.png"), 0, 0, 125 * h, 37 * h); var b = new Laya.Sprite; return b.width = 14 * h, b.height = 14 * h, b.pos(I.width - 14 * h / 2, -14 * h / 2), b.graphics.drawTexture(Laya.loader.getRes("paihangbang/red.png"), 0, 0, 14 * h, 14 * h), I.addChild(b), I.on(Laya.Event.CLICK, this, function (e) { a.showGZ() }), r.addChild(s), r.addChild(x), r.addChild(I), Laya.Browser.onMiniGame && Laya.Browser.window.wx.hideLoading(), r }, t.prototype.showGZ = function () { var e = this.opacityBg(), t = Laya.Browser.window.scX, a = this.getImage("paihangbang/gz.png", 662 * t, 637 * t, (e.width - 662 * t) / 2, (e.height - 637 * t) / 2), i = this.getImage("paihangbang/cf.png", 167 * t, 70 * t, (a.width - 167 * t) / 2, 485 * t); a.addChild(i), i.on(Laya.Event.CLICK, this, function () { new d.default("fenbao/shengyin/btn.mp3", !1, 1), e.removeSelf() }), e.addChild(a), this.addChild(e) }, t.prototype.friendRankList = function () { var e = this.rbg.getChildByName("layaList"), t = this.rbg.getChildByName("openData"); if (null != e && (e.visible = !1), null != t) return t.visible = !0, null; if (Laya.Browser.onMiniGame) { var a = Laya.Browser.window.scX, i = (Laya.Browser.window.scY, Laya.Browser.window.wx), n = new Laya.WXOpenDataViewer; n.name = "openData", n.width = 640 * a, n.height = 935 * a, n.pos((this.rbg.width - 640 * a) / 2, 270 * a); var r = i.getOpenDataContext(); return r.postMessage({ action: "clear" }), r.postMessage({ action: "ranking", gameData: [a, o.default.openId] }), n } return null }, t.prototype.getImage = function (e, t, a, i, n) { void 0 === i && (i = 0), void 0 === n && (n = 0); var o = new Laya.Sprite; return o.width = t, o.height = a, o.graphics.drawTexture(Laya.loader.getRes("" + e), 0, 0, t, a), o.pos(i, n), o }, t.prototype.opacityBg = function () { var e = new Laya.Sprite; e.x = 0, e.y = 0, e.width = Laya.stage.width, e.height = Laya.stage.height; var t = new Laya.Graphics; return t.clear(), t.save(), t.alpha(.6), t.drawRect(0, 0, this.width, this.height, "#000000"), t.restore(), e.graphics = t, e.on(Laya.Event.CLICK, this, function () { return !1 }), this.addChild(e), e }, t.prototype.opacityBg1 = function () { var e = this.getImage("daoju/popupBg.png", Laya.stage.width, Laya.stage.height, 0, 0); return e.on(Laya.Event.CLICK, this, function () { return !1 }), this.addChild(e), e }, t.prototype.alivePopup = function (e) {
        var t = this, a = this.opacityBg(), i = Laya.Browser.window.scX, n = this.getImage("fuhuo/beijing.png", 662 * i, 560 * i, (a.width - 662 * i) / 2, (a.height - 660 * i) / 2); if (o.default.lookNum <= 10) { var r = this.getImage("fuhuo/kanshiping.png", 200 * i, 70 * i, (n.width - 200 * i) / 2, n.height - 70 * i * 1.75); r.on(Laya.Event.CLICK, this, function (a) { new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("复活"), new s.default("/EatChicken/user/lockAd.action", "get", {}, o.default.cookie, function (a) { o.default.lookNum++ , t.hidePopup(), e(4) }) }), n.addChild(r) } else { var r = this.getImage("fuhuo/fenxiang.png", 200 * i, 70 * i, (n.width - 200 * i) / 2, n.height - 70 * i * 1.75); r.on(Laya.Event.CLICK, this, function (a) { new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("复活"), Laya.Browser.window.timeDesc = (new Date).getTime(); var i = t.randomNum(0, o.default.shareText.length - 1); new h.default(i + 1, o.default.shareText[i]).activeShare(o.default.shareText[i], null, null, null, null, function (a) { 1 == a ? (e(4), console.log("领取成功")) : Laya.Browser.window.wx.showToast({ title: "分享失败", icon: "", image: "jiazai/fails.png" }), t.hidePopup() }) }), n.addChild(r) } var l = this.getImage("fuhuo/tiaoguo.png", 97 * i, 26 * i, (n.width - 97 * i) / 2, n.height + 70 * i * 1.5); l.on(Laya.Event.CLICK, this, function (a) {
          new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("跳过"), t.hidePopup(), e(-1)
        }), l.alpha = .6, n.addChild(l), a.addChild(n), this.addChild(a)
      }, t.prototype.getProp = function (e, t, a, i) { var n = this; void 0 === i && (i = !1); var u = this.opacityBg1(), g = Laya.Browser.window.scX, f = new Laya.Sprite, c = this.getImage("daoju/topTxt.png", 427 * g, 66 * g, (u.width - 427 * g) / 2, 0); c.zOrder = 1; var p = this.getImage("daoju/txtBg.png", 322 * g, 60 * g, (u.width - 322 * g) / 2, c.y + 1.5 * c.height), y = new Laya.Text, w = ""; "gcz" == e && (w = "获得道具：炸弹" + t + "个"), "greset" == e && (w = "获得道具：闪光弹" + t + "个"), "glx" == e && (w = "获得道具：信号枪" + t + "个"), "gsz" == e && (w = "获得道具：烟雾弹" + t + "个"), "gzs" == e && (w = "获得钻石：+" + t), y.text = "" + w, y.fontSize = 32 * g, y.width = 300 * g, y.font = "clawFont", y.pos((p.width - y.width) / 2, (p.height - y.getBounds().height) / 2), p.addChild(y); var m = this.getImage("daoju/cir.png", 750 * g, 832 * g, (u.width - 750 * g) / 2, c.y + p.height), L = this.getImage("daoju/" + e + ".png", 86 * g * 2, 98 * g * 2, (m.width - 86 * g * 2) / 2, (m.height - 98 * g * 2) / 2); m.addChild(L), f.addChild(c), f.addChild(p), f.addChild(m); var v = this.getImage("daoju/get.png", 272 * g, 94 * g, u.width / 2, m.y + m.height + 94 * g / 2); v.pivot(v.width / 2, v.height / 2), v.on(Laya.Event.CLICK, this, function () { if (new d.default("fenbao/shengyin/btn.mp3", !1, 1), i) { console.log("看视频领取或者分享"), Laya.Browser.window.timeDesc = (new Date).getTime(); var l = n.randomNum(0, o.default.shareText.length - 1); new h.default(l + 1, o.default.shareText[l]).activeShare(o.default.shareText[l], null, null, null, null, function (t) { 1 == t ? (console.log("领取成功"), "gzs" == e && new s.default("/EatChicken/user/addMoney.action?count=500", "get", {}, o.default.cookie, function (e) { new r.default("领取成功") })) : Laya.Browser.window.wx.showToast({ title: "分享失败", icon: "", image: "jiazai/fails.png" }) }) } else console.log("免费获得"); n.hidePopup(); n.getGiftCode(e, t, a), new r.default("领取成功"), null != Laya.stage.getChildByName("getDayGift") && Laya.stage.removeChildByName("getDayGift") }), f.addChild(v); var x = this.getImage("daoju/fq.png", 121 * g, 33 * g, (u.width - 121 * g) / 2, v.y + 1.2 * v.height); x.on(Laya.Event.CLICK, this, function (e) { new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("跳过"), n.hidePopup() }), x.alpha = .6, f.addChild(x), f.width = u.width, f.height = c.height + p.height + m.height + v.height, f.pos(0, (u.height - f.height) / 2), new l.default(v, function () { }, !0).zoom(), u.addChild(f), this.addChild(u) }, t.prototype.getGiftCode = function (e, t, a) { var i = a.btnGroup, n = Laya.Browser.window.scX; if ("gcz" == e) { var r = i.getChildAt(1), s = i.x + r.x, h = i.y + r.y; this.getPropAnim(r, s, h, t, n), o.default.prop.cz += t } else if ("glx" == e) { var r = i.getChildAt(4), s = i.x + r.x, h = i.y + r.y; this.getPropAnim(r, s, h, t, n), o.default.prop.bomb += t } else if ("greset" == e) { var r = i.getChildAt(3), s = i.x + r.x, h = i.y + r.y; this.getPropAnim(r, s, h, t, n), o.default.prop.resetImg += t } else if ("gsz" == e) { var r = i.getChildAt(2), s = i.x + r.x, h = i.y + r.y; this.getPropAnim(r, s, h, t, n), o.default.prop.pen += t } }, t.prototype.getPropAnim = function (e, t, a, i, n) { var o = this.getImage("xinzhuye/" + e.name + ".png", 96 * n, 98 * n, (Laya.stage.width - 86 * n) / 2, (Laya.stage.height - 98 * n) / 2); o.zOrder = 3, Laya.Tween.to(o, { x: t, y: a, scX: .5, scY: .5, alpha: .3, update: Laya.Handler.create(this, function (e) { }) }, 1500, Laya.Ease.circInOut, Laya.Handler.create(this, function (t) { Laya.stage.removeChild(o), e.nums += i; var a = e.getChildByName("oText").getChildAt(0); null != a && (a.text = "拥有:" + e.nums); var n = e.getChildByName("oHaveImg"); e.getChildByName("oText").visible = !0, null != n && (n.visible = !1) }), 0), Laya.stage.addChild(o) }, t.prototype.getDayGift = function (e) { var t = this; void 0 === e && (e = null); var a = this.opacityBg1(), i = Laya.Browser.window.scX, n = new Laya.Sprite, h = this.getImage("meirilibao/dayTxt.png", 425 * i, 66 * i, (a.width - 425 * i) / 2, 0); h.zOrder = 1; var u = this.getImage("daoju/cir.png", 750 * i, 832 * i, (a.width - 750 * i) / 2, h.y + h.height / 2), g = this.getImage("meirilibao/zs.png", 409 * i, 392 * i, (u.width - 409 * i) / 2, (u.height - 392 * i) / 2); u.addChild(g), n.addChild(h), n.addChild(u); if (o.default.lookNum > 10); else; var f = this.getImage("meirilibao/get.png", 272 * i, 94 * i, a.width / 2, u.y + u.height + 94 * i / 2); f.pivot(f.width / 2, f.height / 2), Object.defineProperty(f, "getType", { value: "get" }), f.on(Laya.Event.CLICK, this, function () { return new d.default("fenbao/shengyin/btn.mp3", !1, 1), void new r.default("暂未开放") }), n.addChild(f); var c = this.getImage("meirilibao/jump.png", 142 * i, 26 * i, (a.width - 142 * i) / 2, f.y + 1.2 * f.height); c.on(Laya.Event.CLICK, this, function (a) { new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("跳过"), t.hidePopup(), new s.default("/EatChicken/user/getLoginTask.action?type=1", "get", {}, o.default.cookie, function (t) { o.default.getDayGift = !0, null != e && e(2) }) }), c.alpha = .6, n.addChild(c), n.width = a.width, n.height = h.height + u.height + f.height, n.pos(0, (a.height - n.height) / 2), new l.default(f, function () { }, !0).zoom(), a.addChild(n), this.addChild(a) }, t.prototype.invGift = function (e) { var t = this; void 0 === e && (e = null); var a = this.opacityBg1(), i = Laya.Browser.window.scX, l = this.getImage("yaoqing/invBg.png", 742 * i, 1149 * i, (a.width - 742 * i) / 2, (a.height - 1149 * i) / 2), u = new Laya.List; u.itemRender = n.default, u.repeatX = 1, u.repeatY = 7, u.name = "ingList", u.x = (l.width - 640 * i) / 2, u.y = 140 * i, u.height = 927 * i, u.width = 630 * i, u.vScrollBarSkin = ""; var g = [], f = [], c = !1; new s.default("/EatChicken/task/getTask.action", "get", {}, o.default.cookie, function (a) { c = !0, g = a.data.addDatas.resultlist; for (var n = 0; n < g.length; ++n) { var l = new Laya.Sprite; l.width = 640 * i, l.height = 158 * i, l.pos(0, 10 * n), l.graphics.drawTexture(Laya.loader.getRes("yaoqing/right.png"), 0, 0, 640 * i, 158 * i), l.size(1, 1); var p = new Laya.Sprite, y = new Laya.Sprite; y.width = 89 * i, y.height = 89 * i, y.graphics.drawTexture(Laya.loader.getRes("yaoqing/cir.png"), 0, 0, 89 * i, 89 * i); var w = new Laya.Sprite; w.width = 89 * i, w.height = 89 * i, null != g[n].headUrl ? w.loadImage("" + g[n].headUrl) : w.loadImage("yaoqing/d.png"), p.pos(30 * i, (158 * i - y.height) / 2), p.addChild(y), p.addChild(w), p.mask = y, l.addChild(p); var m = new Laya.Sprite; m.width = 476 * i, m.height = 94 * i, m.graphics.drawTexture(Laya.loader.getRes("yaoqing/list.png"), 0, 0, 476 * i, 94 * i), m.pos(640 * i - 476 * i - 30 * i, (158 * i - 94 * i) / 2), m.size(1, 1); var L = new Laya.Text, v = ""; null != g[n].nickName ? (v = g[n].nickName.toString().length > 6 ? g[n].nickName.substring(0, 6) + "..." : g[n].nickName, L.color = "#fff", L.fontSize = 28 * i) : (v = "邀请好友助力".toString().length > 6 ? "邀请好友助力".substring(0, 6) + "..." : "邀请好友助力", L.color = "#fff", L.fontSize = 28 * i), L.text = "" + v, L.pos(10 * i, L.getBounds().height / 4), m.addChild(L); var x = new Laya.Text; x.text = "需求人数：" + (n + 1), x.color = "#fff", x.fontSize = 24 * i, x.pos(10 * i, y.height - x.getBounds().height - x.getBounds().height / 4), m.addChild(x); var C = new Laya.Text; C.text = "奖励：" + g[n].task.reward, C.color = "#f5b239", C.fontSize = 30 * i, C.pos(x.x + x.width + 10 * i, (94 * i - C.height) / 2), m.addChild(C); var B = null; "working" == g[n].taskState ? (B = new Laya.Button("yaoqing/invget.png", ""), B.name = "working") : "completed" == g[n].taskState ? (B = new Laya.Button("yaoqing/mget.png", ""), B.name = "completed") : "draw" == g[n].taskState && (B = new Laya.Button("yaoqing/yget.png", ""), B.name = "draw"), B.width = 131 * i, B.height = 70 * i, B.stateNum = 1, Object.defineProperty(B, "nums", { value: g[n].task.reward }), Object.defineProperty(B, "taskId", { value: g[n].id }), B.pos(476 * i - B.width - 10 * i, (94 * i - B.height) / 2), B.on(Laya.Event.CLICK, t, function (a) { new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("处理逻辑。领取邀请等"); var i = a.target; if ("working" == i.name) { var n = t.randomNum(0, o.default.shareText.length - 1); new h.default(n + 1, o.default.shareText[n]).activeShare(o.default.shareText[n]) } else { if ("completed" != i.name) return; new s.default("/EatChicken/task/drawTask.action?type=" + i.taskId, "get", {}, o.default.cookie, function (t) { i.skin = "yaoqing/yget.png", i.name = "draw", new r.default("领取成功，钻石+" + i.nums), null != e && e(i.nums) }) } }), m.addChild(B), l.addChild(m), f.push(l) } u.array = f }); var p = this.getImage("paihangbang/close.png", 47 * i, 39 * i, l.width - 47 * i - 39 * i * 1.7, 39 * i * 1.5); p.on(Laya.Event.CLICK, this, function () { new d.default("fenbao/shengyin/btn.mp3", !1, 1), c && t.hidePopup() }), l.addChild(p), l.addChild(u), a.addChild(l), this.addChild(a), u.renderHandler = new Laya.Handler(this, this.onListRender) }, t.prototype.selectSub = function () { console.log(123456456) }, t.prototype.onListRender = function (e, t) { }, t.prototype.onInvBtnClick = function (e) { console.log("你点击了第：" + e + "个btn") }, t.prototype.continueGame = function (e) { var t = this; void 0 === e && (e = null); var a = this.opacityBg(), i = Laya.Browser.window.scX, n = this.getImage("jixuyouxi/jxBg.png", 662 * i, 637 * i, (a.width - 662 * i) / 2, (a.height - 637 * i) / 2); a.addChild(n), new s.default("/EatChicken/user/maxValueList.action", "get", {}, o.default.cookie, function (a) { var r = a.data.addDatas.resultlist[0]; if (null != r && r.length >= 1) { var l = t.getImage("jixuyouxi/title.png", 140 * i, 34 * i, (n.width - 140 * i) / 2, 80 * i), u = new Laya.Text; u.text = r[0].checkpoint + 1 + "关", u.color = "#f8e0ad", u.fontSize = 48 * i, u.pos((n.width - u.width) / 2, l.y + l.height + 30 * i); var g = t.getImage("jixuyouxi/txt.png", 450 * i, 187 * i, (n.width - 450 * i) / 2, u.y + u.height + 30 * i), f = null; f = t.getImage("jixuyouxi/video.png", 224 * i, 94 * i, (n.width - 224 * i) / 2 - 224 * i / 1.5, n.height - 94 * i * 2), Object.defineProperty(f, "level", { value: r[0].checkpoint }), f.on(Laya.Event.CLICK, t, function (t) { if (new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("拉取视频或者分享"), Laya.Browser.onMiniGame) { var a = t.target; new s.default("/EatChicken/user/lockAd.action", "get", {}, o.default.cookie, function (t) { o.default.lookNum++ , o.default.nowLevel = parseInt(a.level), o.default.passLevel = o.default.nowLevel, null != e && e(1) }) } }); var c = null; c = t.getImage("jixuyouxi/share.png", 224 * i, 94 * i, (n.width - 224 * i) / 2 + 224 * i / 1.5, n.height - 94 * i * 2), Object.defineProperty(c, "level", { value: r[0].checkpoint }), c.on(Laya.Event.CLICK, t, function (a) { if (new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("拉取视频或者分享"), Laya.Browser.onMiniGame) { var i = a.target, n = Laya.Browser.window.wx, r = t.randomNum(0, o.default.shareText.length - 1); new h.default(r + 1, o.default.shareText[r]).activeShare(o.default.shareText[r], "getLevel"), n.onShow(function (t) { o.default.shareSuccess ? (o.default.shareSuccess = !1, o.default.nowLevel = parseInt(i.level), o.default.passLevel = o.default.nowLevel, null != e && e(1)) : n.showToast({ title: "分享失败", icon: "", image: "jiazai/fails.png" }) }) } }), n.addChild(l), n.addChild(u), n.addChild(g), n.addChild(f), n.addChild(c) } }); var r = this.getImage("jixuyouxi/close.png", 22 * i, 22 * i, 555 * i, 80 * i); r.on(Laya.Event.CLICK, this, function () { new d.default("fenbao/shengyin/btn.mp3", !1, 1), t.hidePopup() }), r.size(50 * i, 50 * i), n.addChild(r), this.addChild(a) }, t.prototype.redSave = function (e) { var t = this; void 0 === e && (e = null); var a = this.opacityBg(), i = Laya.Browser.window.scX, n = this.getImage("baocun/save.png", 662 * i, 497 * i, (a.width - 662 * i) / 2, (a.height - 497 * i) / 2), o = this.getImage("baocun/restart.png", 200 * i, 70 * i, (n.width - 200 * i) / 2 - 200 * i / 1.5, 365 * i), r = this.getImage("baocun/constart.png", 200 * i, 70 * i, (n.width - 200 * i) / 2 + 200 * i / 1.5, 365 * i); o.on(Laya.Event.CLICK, this, function () { new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("新的开始"), t.hidePopup(), null != e && e(1) }), r.on(Laya.Event.CLICK, this, function () { new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("关卡开始"), t.hidePopup(), null != e && e(2) }), n.addChild(o), n.addChild(r), a.addChild(n), this.addChild(a) }, t.prototype.noZs = function (e, t) { var a = this; void 0 === t && (t = null); var i = this.opacityBg(), n = Laya.Browser.window.scX, s = this.getImage("zuanshi/zsBg.png", 662 * n, 560 * n, (i.width - 662 * n) / 2, (i.height - 560 * n) / 2), h = this.getImage("zuanshi/zs.png", 86 * n, 95 * n, (s.width - 86 * n) / 2, 260 * n), l = new Laya.Text; if (l.text = "奖励钻石：" + new u.default(e).formatPointNumber(), l.color = "#f8e0ad", l.fontSize = 36 * n, l.pos((s.width - l.width) / 2, h.y + h.height + 15 * n), s.addChild(h), s.addChild(l), o.default.lookNum > 10) { var g = this.getImage("zuanshi/share.png", 272 * n, 94 * n, (s.width - 272 * n) / 2, 420 * n); g.on(Laya.Event.CLICK, this, function () { return new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("分享获得"), a.hidePopup(), void new r.default("暂未开放") }), s.addChild(g) } else { var g = this.getImage("zuanshi/video.png", 272 * n, 94 * n, (s.width - 272 * n) / 2, 420 * n); g.on(Laya.Event.CLICK, this, function () { new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("视频领取"), a.hidePopup(), new r.default("暂未开放!") }), s.addChild(g) } var f = this.getImage("zuanshi/fq.png", 97 * n, 26 * n, (s.width - 97 * n) / 2, s.height + 26 * n * 2); f.alpha = .6, f.on(Laya.Event.CLICK, this, function () { new d.default("fenbao/shengyin/btn.mp3", !1, 1), a.hidePopup() }), s.addChild(f), i.addChild(s), this.addChild(i) }, t.prototype.pass = function (e) { var t = this; void 0 === e && (e = null), new d.default("fenbao/shengyin/shengli.mp3", !1, 1); var a = this.opacityBg1(), i = Laya.Browser.window.scX, n = new Laya.Sprite, s = this.getImage("guoguan/pass.png", 324 * i, 67 * i, (a.width - 324 * i) / 2, 0); s.zOrder = 1; var h = this.getImage("guoguan/passBg.png", 750 * i, 832 * i, (a.width - 750 * i) / 2, s.y); if (n.addChild(s), n.addChild(h), o.default.lookNum > 10) { var u = this.getImage("meirilibao/get1.png", 272 * i, 94 * i, a.width / 2, h.y + h.height / 1.1); u.pivot(u.width / 2, u.height / 2), u.on(Laya.Event.CLICK, this, function () { return new d.default("fenbao/shengyin/btn.mp3", !1, 1), new r.default("暂未开放"), void t.hidePopup() }), n.addChild(u) } else { var u = this.getImage("meirilibao/get.png", 272 * i, 94 * i, a.width / 2, h.y + h.height / 1.1); u.pivot(u.width / 2, u.height / 2), u.on(Laya.Event.CLICK, this, function () { new d.default("fenbao/shengyin/btn.mp3", !1, 1), new r.default("暂未开放"), t.hidePopup() }), n.addChild(u) } var g = this.getImage("daoju/fq.png", 121 * i, 33 * i, (a.width - 121 * i) / 2, u.y + 1.2 * u.height); g.on(Laya.Event.CLICK, this, function (a) { new d.default("fenbao/shengyin/btn.mp3", !1, 1), console.log("跳过"), t.hidePopup(), null != e && e(1) }), g.alpha = .6, n.addChild(g), n.width = a.width, n.height = s.height + h.height + u.height, n.pos(0, (a.height - n.height) / 2), new l.default(u, function () { }, !0).zoom(), a.addChild(n), this.addChild(a) }, t
    }(Laya.Sprite); a.default = g
  }, { "../common/AllTip": 3, "../common/BtnAnimation": 4, "../common/FormatNumber": 5, "../common/SoundManager": 6, "../config/config": 9, "../request/GetData": 18, "../share/Share": 20, "./ItemInv": 15, "./ItemRank": 16 }], 18: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = e("./url"), n = function () { function e(e, t, a, i, n, o) { void 0 === o && (o = null), this.url = e, this.method = t, this.data = a, this.cookie = i, this.callbackSucc = n, this.callbackFail = o, this._getData() } return e.prototype._getData = function () { var e = Laya.Browser.window.wx, t = this; e.request({ url: "" + i.default + this.url, data: t.data, method: t.method, header: { "content-type": "application/x-www-form-urlencoded", Cookie: "JSESSIONID=" + t.cookie }, success: function (e) { t.callbackSucc(e) }, error: function (e) { t.callbackFail(e) } }) }, e }(); a.default = n }, { "./url": 19 }], 19: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); a.default = "https://wxgame.this1.cn" }, {}], 20: [function (e, t, a) { Object.defineProperty(a, "__esModule", { value: !0 }); var i = e("../config/config"), n = function () { function e(e, t) { this.share = null, this.imgIndex = 0, this.shareTxt = "", this.share = Laya.Browser.window.wx.createCanvas(), this.share.width = 400, this.share.height = 320, this.imgIndex = e; var a = this.share.getContext("2d"), i = Laya.Browser.window.wx.createImage(); this.shareTxt = t, i.src = "jiazai/share" + this.imgIndex + ".jpg", i.onload = function () { a.drawImage(i, 0, 0) } } return e.prototype.filePath = function (e) { return e.toTempFilePathSync({ width: 400, height: 320, destWidth: 400, destHeight: 320, x: 0, y: 0 }) }, e.prototype.passiveShare = function (e, t) { Laya.Browser.window.wx.showShareMenu({ withShareTicket: !0 }), Laya.Browser.window.wx.onShareAppMessage(this.shareAll(this, 1, this.shareTxt, e, 1, "no")), Laya.Browser.window.wx.updateShareMenu({ withShareTicket: !0 }) }, e.prototype.shareAll = function (e, t, a, i, n, o) { void 0 === i && (i = null), void 0 === n && (n = null), void 0 === o && (o = null); var r = n; return 1 == t ? function () { return { title: e.shareTxt, imageUrl: e.filePath(e.share), query: "fromChannel=btnShare&upUserInfoId=" + Laya.Browser.window.wx.userId } } : { title: e.shareTxt, imageUrl: "jiazai/share" + e.imgIndex + ".jpg", query: "fromChannel=" + r + "&upUserInfoId=" + Laya.Browser.window.wx.userId + "&userBtn=" + o } }, e.prototype.activeShare = function (e, t, a, n, o, r) { void 0 === t && (t = null), void 0 === a && (a = null), void 0 === n && (n = null), void 0 === o && (o = null), void 0 === r && (r = null), this.shareTxt = e, Laya.Browser.window.wx.shareAppMessage(this.shareAll(this, 2, e, t, a, o)), "getLevel" == t && 2 == ++i.default.shareNum && (i.default.shareNum = 0, i.default.shareSuccess = !0), null != r && Laya.Browser.window.wx.onShow(function (e) { var t = (new Date).getTime(); r(t - Laya.Browser.window.timeDesc > 3e3 ? 1 : 0) }) }, e }(); a.default = n }, { "../config/config": 9 }]
}, {}, [2]);